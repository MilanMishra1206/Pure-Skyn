"use strict";(self.webpackChunkpure_skyn=self.webpackChunkpure_skyn||[]).push([[4213],{4213:(e,r,a)=>{a.d(r,{A:()=>q});var s=a(2483),t=a(3117),i=a(3376),o=a(4315),n=a(7757),l=a(7891),d=a(7080),c=a(9891),u=a(1481),m=a(7340),h=a(3912),p=a(6723);const v=(0,s.lazy)((()=>Promise.all([a.e(2442),a.e(2017),a.e(5570),a.e(6624),a.e(3715)]).then(a.bind(a,3105))));const w=function(e){var r,a;let{formik:t,handleSubmit:i,mobileClass:o,isAdminPage:n=!1}=e;const[d,w]=(0,s.useState)(!1);return(0,p.jsxs)(m.P.div,{variants:(0,h.A)("up",.1),initial:"hidden",whileInView:"show",viewport:{once:!0},className:"w-full max-w-md mx-auto bg-[#FFFFFF] md:shadow-lg md:rounded-3xl p-8 ".concat(o),children:[(0,p.jsx)("div",{className:"flex justify-center p-4",children:(0,p.jsx)("img",{src:l.A.images.Common.newLogoWhite,alt:"branding",className:"w-4/5 md:!w-3/5"})}),(0,p.jsx)("div",{className:"text-3xl font-poppins text-kashmirBlue font-extrabold mb-6 text-center",children:n?"SIGN IN ADMIN":"SIGN IN"}),(0,p.jsxs)("form",{className:"w-full",children:[(0,p.jsx)(s.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Email Id",name:"email",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(r=t.values)||void 0===r?void 0:r.email,onChange:t.handleChange,handleBlur:t.handleBlur,error:t.errors.email,touched:t.touched.email})}),(0,p.jsx)(s.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",type:d?"text":"password",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Password",name:"password",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(a=t.values)||void 0===a?void 0:a.password,onChange:t.handleChange,handleBlur:t.handleBlur,error:t.errors.password,touched:t.touched.password,iconEnd:d?(0,p.jsx)(u.Ny1,{}):(0,p.jsx)(u.mx3,{}),iconOnClick:()=>w(!d)})})]}),(0,p.jsx)("div",{className:"",children:(0,p.jsx)("p",{children:(0,p.jsx)(c.N_,{to:"/change-password",className:"underline text-skyn hover:!opacity-80 text-sm",children:"Forgot Password?"})})}),(0,p.jsx)("button",{type:"button",onClick:i,className:"mt-4 w-full bg-skyn text-white py-2 px-4 rounded-md hover:opacity-80 focus:outline-none focus:ring-2 focus:ring-skyn shadow-lg",children:"Sign In"}),!n&&(0,p.jsx)("div",{className:"mt-4 text-center",children:(0,p.jsxs)("p",{children:["Don't have an account?"," ",(0,p.jsx)(c.N_,{to:"/sign-up",className:"underline text-skyn hover:!opacity-80",children:"Sign up"})]})}),!n&&(0,p.jsx)("div",{className:"mt-4 text-center",children:(0,p.jsxs)("p",{children:["Go to"," ",(0,p.jsx)(c.N_,{to:"/",className:"underline text-skyn hover:!opacity-80",children:"Dashboard"})]})})]})};var g=a(3378),y=a(8305),b=a(3245),x=a(3190),A=a(6399);const j=(0,s.lazy)((()=>Promise.resolve().then(a.bind(a,7855))));const q=function(e){let{isAdminPage:r=!1}=e;const a=(0,g.k)(),c=(0,i.Zp)(),u=(0,n.wA)(),{mutate:m}=(0,o.useMutation)(x.GA,{onSuccess(e){"SUCCESS"===(null===e||void 0===e?void 0:e.status)?u((0,b.od)({addresses:null===e||void 0===e?void 0:e.data})):a(e.message,"error")},onError(e){a(e.message,"error")}}),{mutate:h,isLoading:v}=(0,o.useMutation)(A.a,{onSuccess:e=>{"SUCCESS"===(null===e||void 0===e?void 0:e.status)?u((0,b.Ty)(null===e||void 0===e?void 0:e.data[0].packageDetails)):u((0,b.Ty)([]))},onError:()=>{u((0,b.Ty)([]))}}),{mutate:q,isLoading:f}=(0,o.useMutation)(y.Lx,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const r=null===e||void 0===e?void 0:e.data,{id:s,email:t,name:i,phone:o,gender:n,role:l}=r;a(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===r||void 0===r?void 0:r.token),u((0,b.p)({userId:s,email:t,name:i,phone:o,gender:n,isAdmin:"ROLE_ADMIN"===l})),m({userId:s}),h({userId:s}),c("/")}else a("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){a(e,"error")}}),{mutate:P,isLoading:S}=(0,o.useMutation)(y.b7,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const r=null===e||void 0===e?void 0:e.data,{id:s,email:t,name:i,phone:o,gender:n,role:l}=r;a(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===r||void 0===r?void 0:r.token),u((0,b.p)({userId:s,email:t,name:i,phone:o,gender:n,isAdmin:"ROLE_ADMIN"===l})),c("/")}else a("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){a(e,"error")}}),N=(0,t.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:d.Cq,validationSchema:d.B7,onSubmit:e=>{r?P({email:e.email.toLowerCase(),password:e.password}):q({email:e.email.toLowerCase(),password:e.password})}}),C=()=>{N.isValid?N.handleSubmit():a("Please fill all the required details!","error")};return(0,p.jsxs)("div",{className:"md:flex md:justify-center md:items-center min-h-screen relative bg-[#FAFAFA]",children:[(0,p.jsx)(s.Suspense,{children:(0,p.jsx)(j,{open:f||v||S})}),(0,p.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-cover bg-center hidden md:block",style:{backgroundImage:"url(".concat(l.A.images.Login.loginBg,")")}}),(0,p.jsx)("div",{className:"w-full h-full flex flex-col md:flex-row justify-end items-center z-10 relative",children:(0,p.jsx)("div",{className:"hidden md:flex w-full md:w-1/2 p-8 flex-col justify-center items-center",children:(0,p.jsx)(w,{formik:N,handleSubmit:C,isAdminPage:r})})}),(0,p.jsx)("div",{className:"md:hidden w-full h-full absolute flex",children:(0,p.jsx)(w,{formik:N,handleSubmit:C,mobileClass:"flex flex-col items-center",isAdminPage:r})})]})}},5831:(e,r,a)=>{a.d(r,{A:()=>s});const s={baseURL:"https://3.109.206.27/api/v1",Admin:{getAllUsers:"users/all",availableTechnicians:"admin/available-technicians"},Auth:{login:"/auth/login",loginAdmin:"/admin/login",registerUser:"/admin/register",requestChangePassword:"/auth/request-password-change?email=",changePassword:"/auth/change-password"},Booking:{getCartDetails:"/cart/",reqBooking:"/booking/request",createBooking:"/booking/create"},Cart:{saveServiceCart:"/cart/add-update",getServiceCart:"/cart/"},Query:{newQuery:"/query/new",updateQueryStatus:"/query/",getAllQuery:"/query/all",getQueryWithFilter:"/query/status/"},Services:{getAllServices:"/services/all",createService:"/services/create"},Users:{addAddress:"/auth/user/add-address",getUserAddress:"/users/address",updateUserDetails:"/auth/update-user",updateUserAddress:"/auth/update-address",deleteUserAddress:"/auth/user/delete-address"}}},7080:(e,r,a)=>{a.d(r,{B7:()=>o,Cq:()=>i,Xx:()=>c,_I:()=>l,c_:()=>u,d7:()=>d,w9:()=>n});var s=a(947),t=a(6946);a(2483),a(6723);const i={email:"",password:""},o=()=>s.Ik().shape({email:s.Yj().email("Please Enter Valid Email").required("Email is required"),password:s.Yj().required("Password is required")}),n={name:"",email:"",phone:"",password:"",confirmPassword:""},l=()=>s.Ik().shape({name:s.Yj().required("Name is required"),email:s.Yj().email("Please Enter Valid Email").required("Email is required"),phone:s.Yj().required("Phone number is required").matches(t.y.mobileNumber,"Enter Valid Phone Number"),password:s.Yj().required("Password is required"),confirmPassword:s.Yj().oneOf([s.KR("password")],"Password Must Match").required("Confirm password is required")}),d=()=>s.Ik().shape({name:s.Yj().required("Name is required"),email:s.Yj().email("Please Enter Valid Email").required("Email is required"),mobile:s.Yj().matches(t.y.mobileNumber,"Please Enter Valid Mobile Number").required("Mobile number is required"),address:s.Yj().required("Address is required"),treatmentDate:s.Yj().required("Date is required"),timeSlot:s.Yj().required("Please select a time slot"),city:s.Yj().required("City is required")}),c=()=>s.Ik().shape({fullName:s.Yj().required("Full name is required"),email:s.Yj().email("Please Enter Valid Email").required("Email is required"),rating:s.ai().required("Rating is required"),description:s.Yj().required("Description is required").min(10,"Description must be at least 10 characters").max(250,"Description cannot exceed 250 characters").test("word-count","Description must be between 2 and 50 words",(e=>{const r=e?e.trim().split(/\s+/).length:0;return r>=2&&r<=50}))}),u=()=>s.Ik().shape({name:s.Yj().required("Name is required"),phone:s.Yj().matches(t.y.mobileNumber,"Please Enter Valid Mobile Number").required("Mobile Number is required"),serviceId:s.Yj().required("Select Service Option")})},6946:(e,r,a)=>{a.d(r,{H:()=>t,y:()=>s});const s={numeric:/^[0-9]*$/,alphabet:/^[a-zA-Z.]+$/,alphabetWithSpace:/^[a-zA-Z ]*$/,alphabetNumberWithSpace:/^[a-zA-Z0-9\s&-. ]*$/,stringWithSpaces:/^[a-zA-Z0-9\s!@#$%^&*()-_=+[\]{}|;:'",.<>/?]*$/,mobileNumber:/^[56789]\d{9}$/,noRepeatMobileNumber:/^(?!.*(\d)\1{4})[56789]\d{9}$/,stringWithoutSpecialCharacters:/^[^~^|`?+\-=<>@$%*]+$/,emailValidationRegex:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,alphaNumeric:/^[a-zA-Z0-9\s]*$/};function t(e){return"\u20b9".concat(new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e))}},3245:(e,r,a)=>{a.d(r,{ND:()=>h,RO:()=>c,TC:()=>m,Ty:()=>u,a_:()=>d,bE:()=>n,bc:()=>p,dt:()=>l,od:()=>i,p:()=>t,y4:()=>o});var s=a(7112);const t=e=>({type:s.B6,payload:e}),i=e=>({type:s.kn,payload:e}),o=()=>({type:s.b6}),n=e=>({type:s.l$,payload:e}),l=e=>({type:s.dy,payload:e}),d=()=>({type:s.v3}),c=(e,r)=>({type:s.u0,payload:{productId:e,quantity:r}}),u=e=>({type:s.mP,payload:e}),m=e=>({type:s.VR,payload:e}),h=e=>({type:s.By,payload:e}),p=()=>({type:s.xG})},8305:(e,r,a)=>{a.d(r,{DY:()=>o,Lx:()=>i,VJ:()=>d,b7:()=>n,ec:()=>c,hf:()=>l});var s=a(5831),t=a(1689);const i=async e=>{let{email:r,password:a}=e;const i={email:r,password:a};try{return await t.P.post(s.A.Auth.login,i)}catch(o){throw console.log(o),new Error}},o=async e=>{let{name:r,email:a,password:i,phone:o}=e;const n={name:r,email:a,password:i,phone:o};try{return await t.P.post(s.A.Auth.registerUser,n)}catch(l){throw console.log(l),new Error}},n=async e=>{let{email:r,password:a}=e;const i={email:r,password:a};try{return await t.P.post(s.A.Auth.loginAdmin,i)}catch(o){throw console.log(o),new Error}},l=async e=>{let{name:r,email:a,password:i,phone:o}=e;const n={name:r,email:a,password:i,phone:o};try{return await t.P.post(s.A.Auth.registerUser,n)}catch(l){throw console.log(l),new Error}},d=async e=>{let{email:r}=e;try{return await t.P.post("".concat(s.A.Auth.requestChangePassword).concat(r))}catch(a){throw console.log(a),new Error}},c=async e=>{let{token:r,oldPassword:a,newPassword:i}=e;const o={token:r,oldPassword:a,newPassword:i};try{return await t.P.post(s.A.Auth.changePassword,o)}catch(n){throw console.log(n),new Error}}},6399:(e,r,a)=>{a.d(r,{P:()=>o,a:()=>i});var s=a(5831),t=a(1689);const i=async e=>{let{userId:r}=e;try{return await t.P.get("".concat(s.A.Cart.getServiceCart).concat(r))}catch(o){var a,i;throw new Error(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(i=a.error)||void 0===i?void 0:i.message)}},o=async e=>{let{reqBody:r}=e;try{return await t.P.post(s.A.Cart.saveServiceCart,r)}catch(a){throw console.log(a),new Error}}},3190:(e,r,a)=>{a.d(r,{DG:()=>n,GA:()=>o,Z1:()=>d,vN:()=>i,xu:()=>l});var s=a(5831),t=a(1689);const i=async e=>{let{userId:r,addressDetails:a}=e;const i={userId:r,address:a};try{return await t.P.post("".concat(s.A.Users.addAddress),i)}catch(l){var o,n;throw new Error(null===l||void 0===l||null===(o=l.data)||void 0===o||null===(n=o.error)||void 0===n?void 0:n.message)}},o=async e=>{let{userId:r}=e;try{return await t.P.get("".concat(s.A.Users.getUserAddress,"/").concat(r))}catch(o){var a,i;throw new Error(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(i=a.error)||void 0===i?void 0:i.message)}},n=async e=>{let{reqBody:r}=e;try{return await t.P.put(s.A.Users.updateUserDetails,r)}catch(o){var a,i;throw new Error(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(i=a.error)||void 0===i?void 0:i.message)}},l=async e=>{let{reqBody:r}=e;try{return await t.P.put(s.A.Users.updateUserAddress,r)}catch(o){var a,i;throw new Error(null===o||void 0===o||null===(a=o.data)||void 0===a||null===(i=a.error)||void 0===i?void 0:i.message)}},d=async e=>{let{userId:r,addressId:a}=e;try{return await t.P.delete("".concat(s.A.Users.deleteUserAddress,"?userId=").concat(r,"&addressId=").concat(a))}catch(n){var i,o;throw new Error(null===n||void 0===n||null===(i=n.data)||void 0===i||null===(o=i.error)||void 0===o?void 0:o.message)}}},1689:(e,r,a)=>{a.d(r,{P:()=>o});var s=a(2555),t=a(4686),i=a(5831);const o=t.A.create({baseURL:i.A.baseURL}),n=t.A.create({baseURL:i.A.baseURL});o.interceptors.request.use((e=>(e.headers=(0,s.A)({},e.headers),e)),(e=>Promise.reject(e))),o.interceptors.response.use((e=>e.data),(e=>{var r;Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}));const l=async()=>{const e=sessionStorage.getItem("token")||"";try{return e||(sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null)}catch(r){return sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null}};n.interceptors.request.use((async e=>{const r=await l();return e.headers=(0,s.A)({Authorization:"Bearer ".concat(r)},e.headers),e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e.data),(e=>{var r;Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}))}}]);
//# sourceMappingURL=4213.208a37fc.chunk.js.map