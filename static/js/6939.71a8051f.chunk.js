"use strict";(self.webpackChunkpure_skyn=self.webpackChunkpure_skyn||[]).push([[6939],{6939:(e,t,a)=>{a.d(t,{A:()=>S});var s=a(2483),r=a(1901),l=a(7757),o=a(3376),n=a(3117),i=a(4315),d=a(7812),c=a(9891),u=a(3464),m=a(6946),h=a(6723);const x=(0,s.lazy)((()=>Promise.all([a.e(2017),a.e(5570),a.e(6624),a.e(5486)]).then(a.bind(a,3105)))),p=(0,s.lazy)((()=>Promise.all([a.e(2017),a.e(5570),a.e(3825)]).then(a.bind(a,3825)))),g=(0,s.lazy)((()=>Promise.all([a.e(2017),a.e(6624),a.e(9215),a.e(5989),a.e(2552)]).then(a.bind(a,2552))));const v=function(e){var t,a,r,i;let{isLoggedIn:d,formik:v,timeSlots:b}=e;const y=(0,o.Zp)(),f=(0,l.d4)((e=>e.userProfile.userProfile)),[j,k]=(0,s.useState)([]);return(0,s.useEffect)((()=>{var e;const t=(null===f||void 0===f||null===(e=f.addresses)||void 0===e?void 0:e.map((e=>({label:"".concat(e.fullName,", ").concat(e.addressLine1,", ").concat(e.addressLine2,", \n          ").concat(e.city,", ").concat(e.state," - ").concat(e.pinCode,", ").concat(e.phone),value:e.id}))))||[];k(t)}),[f]),(0,s.useEffect)((()=>{var e,t;const a=(null===f||void 0===f||null===(e=f.addresses)||void 0===e||null===(t=e.find((e=>e.id===v.values.address)))||void 0===t?void 0:t.city)||"";v.setFieldValue("city",a)}),[v.values.address,f]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("form",{className:"w-full",children:(0,h.jsxs)("div",{className:"p-4",children:[(0,h.jsx)("div",{className:"text-2xl font-poppins text-center font-extrabold",children:"Please Share Booking Details"}),(0,h.jsx)(u.A,{}),(0,h.jsx)("div",{className:"text-left text-lg md:p-5 ml-2 mb-4 md:!mb-0",children:!d&&(0,h.jsxs)("p",{className:"text-sm font-bold",children:[(0,h.jsx)("button",{className:"text-[#175EC3] hover:opacity-80",onClick:()=>y("/login"),children:"Sign-In"})," ","before proceeding for booking"]})}),(0,h.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 md:p-5",children:[(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)("div",{}),children:(0,h.jsx)(x,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Name",name:"name",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(t=v.values)||void 0===t?void 0:t.name,onChange:v.handleChange,handleBlur:v.handleBlur,error:v.errors.name,touched:v.touched.name})}),(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)("div",{}),children:(0,h.jsx)(x,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,regex:/^[^!#$%^&*()=+{}[\]:;<>,?/~`|"\\ ]*$/,labelToShow:"Email ID",name:"email",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",maxLength:50,value:null===(a=v.values)||void 0===a?void 0:a.email,onChange:v.handleChange,handleBlur:v.handleBlur,error:null===(r=v.errors)||void 0===r?void 0:r.email,touched:null===(i=v.touched)||void 0===i?void 0:i.email})}),(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)("div",{}),children:(0,h.jsx)(x,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Mobile Number",name:"mobile",maxLength:10,regex:m.y.numeric,textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",value:v.values.mobile,onChange:v.handleChange,handleBlur:v.handleBlur,error:v.errors.mobile,touched:v.touched.mobile})}),(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)("div",{}),children:(0,h.jsxs)("div",{children:[(0,h.jsx)(p,{textClassOverride:"!text-kashmirBlue",classes:"!rounded-md !mb-4",requiredStar:!0,labelToShow:"Select Address",name:"address",showIconOutline:!0,options:j,value:v.values.address,handleBlur:v.handleBlur,handleChange:v.handleChange,errorMessage:(0,n.O6)(v.errors,"address"),error:(0,n.O6)(v.errors,"address"),touched:(0,n.O6)(v.touched,"address")}),(0,h.jsx)("div",{children:(0,h.jsx)(c.N_,{className:"text-sm underline text-skyn hover:opacity-80",to:"/user-profile#Address",children:"Add Address"})})]})}),(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)("div",{}),children:(0,h.jsx)(x,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",disabledField:!0,className:"h-12 rounded-md !bg-transparent",requiredStar:!0,labelToShow:"City",name:"city",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",value:v.values.city,onChange:v.handleChange,handleBlur:v.handleBlur,error:v.errors.city,touched:v.touched.city})}),(0,h.jsx)("div",{className:"mb-4",children:(0,h.jsx)(s.Suspense,{fallback:(0,h.jsx)("div",{}),children:(0,h.jsx)(g,{label:"Treatment Date",name:"treatmentDate",textClassToOverride:"!text-kashmirBlue",requiredStar:!0,disablePast:!0,className:"w-full rounded-md !bg-transparent shadow-insetLight",fieldWidth:"!w-full",setFieldValue:v.setFieldValue,setFieldTouched:v.setFieldTouched,value:v.values.treatmentDate,error:v.errors.treatmentDate,touched:v.touched.treatmentDate,inputClassName:"!text-kashmirBlue !font-poppins",onChange:v.handleChange,handleBlur:v.handleBlur})})}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsxs)("label",{htmlFor:"timeSlot",className:"text-sm font-medium pb-1 !text-kashmirBlue",children:["Select Appointment Time"," ",(0,h.jsx)("span",{className:"text-bitterSweet",children:"*"})]}),(0,h.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:b.map(((e,t)=>(0,h.jsx)("button",{type:"button",onClick:()=>v.setFieldValue("timeSlot",e),className:"p-2 rounded text-sm font-bold transition-all shadow-md ".concat(v.values.timeSlot===e?"bg-skyn text-white border-skyn":"bg-white text-gray-700 hover:!bg-gray-100"),children:e},t)))}),v.errors.timeSlot&&v.touched.timeSlot&&(0,h.jsxs)("p",{className:"mt-1 ml-1 text-xs text-bitterSweet",children:[v.errors.timeSlot,"*"]})]})]})]})})})};var b=a(3245),y=a(5399),f=a(7080),j=a(9073),k=a(3378),w=a(7891);const C=(0,s.lazy)((()=>Promise.resolve().then(a.bind(a,7855)))),S=e=>{let{isLoggedIn:t}=e;const a=(0,l.d4)((e=>e.userProfile.userProfile)),c=(0,l.d4)((e=>e.servicesCart.services)),x=(0,l.wA)(),p=(0,o.Zp)(),g=(0,k.k)(),[S,N]=(0,s.useState)(0),[B,A]=(0,s.useState)(!1),[P,I]=(0,s.useState)(!1),[T,q]=(0,s.useState)(""),[L,E]=(0,s.useState)([]),[O,F]=(0,s.useState)({name:"",email:"",mobile:"",address:"",treatmentDate:"",timeSlot:"",city:""});(0,s.useEffect)((()=>{const e=sessionStorage.getItem("availableTimeSlots");E(e?JSON.parse(e):["10:00 AM","12:00 PM","2:00 PM","4:00 PM"])}),[sessionStorage.getItem("availableTimeSlots")]),(0,s.useEffect)((()=>{t&&F({name:a.name||"",email:a.email||"",mobile:a.phone||"",address:"",city:"",treatmentDate:"",timeSlot:""})}),[t,a]);const{mutate:D,isLoading:U}=(0,i.useMutation)(j.Uz,{onSuccess(e){null!==e&&void 0!==e&&e.isError?g(null===e||void 0===e?void 0:e.message,"success"):g(null===e||void 0===e?void 0:e.message,"error")},onError(e){g(null===e||void 0===e?void 0:e.message,"error")}}),z=(0,n.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:O,validationSchema:f.d7,onSubmit:e=>{const t=Array.isArray(c)?c.map((e=>{let{treatmentName:t="",packageName:a="",serviceId:s="",subServiceId:r="",packagePrice:l=0,featureName:o="",selectedPackageImg:n="",strikeOutPrice:i=null}=e;return{treatmentName:t,packageName:a,serviceId:s,subServiceId:r,packagePrice:l,featureName:o,selectedPackageImg:n,strikeOutPrice:i}})):[],s={userId:a.userId,userInfo:e,servicesBooked:t};g("Booking Done!!!","success"),console.log("Booking Done",s)}});(0,s.useEffect)((()=>{const e=c.reduce(((e,t)=>e+ +t.packagePrice),0);N(e)}),[c]);return(0,h.jsxs)("div",{children:[(0,h.jsx)(s.Suspense,{children:(0,h.jsx)(C,{open:U})}),(0,h.jsx)("div",{className:"md:px-5 xl:!mx-5",children:(0,h.jsxs)("div",{className:"flex flex-col xl:!flex-row gap-4 place-content-center px-2 py-6 md:!px-4 sm:py-10",children:[(0,h.jsx)("div",{className:"flow-root border shadow rounded lg:!pl-1 self-start w-full xl:!w-3/5",children:(0,h.jsx)(v,{isLoggedIn:t,formik:z,timeSlots:L})}),(0,h.jsxs)("div",{className:"flex flex-col border shadow rounded p-4 xl:self-start font-poppins",children:[(0,h.jsx)("div",{className:"text-2xl font-bold text-center",children:"Summary"}),(0,h.jsx)(u.A,{}),c.map(((e,t)=>(0,h.jsxs)("div",{children:[(0,h.jsxs)("li",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 p-4 text-left",children:[(0,h.jsx)("img",{src:e.selectedPackageImg,className:"h-16 w-16 object-cover",alt:e.packageName}),(0,h.jsxs)("div",{className:"flex flex-col sm:flex-grow sm:pl-4 text-center md:!text-left",children:[(0,h.jsx)("span",{className:"text-base text-kashmirBlue",children:e.treatmentName}),(0,h.jsx)("span",{className:"font-medium text-coal",children:e.packageName})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("span",{className:"text-base text-coal font-semibold",children:(0,m.H)(e.packagePrice)}),(0,h.jsx)(r.kgr,{size:"1.5rem",className:"text-gray-500 transition-all duration-200 ease-in-out focus:shadow hover:text-red-600 cursor-pointer",onClick:()=>(e=>{q(e),A(!0)})(e.subServiceId)})]})]}),(0,h.jsx)("hr",{})]},t))),(0,h.jsxs)("div",{className:"px-4 py-2",children:[(0,h.jsxs)("div",{className:"flex justify-between py-2 text-lg text-coal",children:[(0,h.jsx)("span",{children:"Total Package Price:"}),(0,h.jsx)("span",{children:(0,m.H)(S)})]}),(0,h.jsxs)("div",{className:"flex justify-between font-semibold py-2 text-lg text-coal",children:[(0,h.jsx)("span",{children:"Amount Payable:"}),(0,h.jsx)("span",{children:(0,m.H)(S/2)})]})]}),(0,h.jsxs)("small",{className:"text-sm mt-4 text-Green",children:["Note: You will have to pay ",(0,h.jsx)("strong",{children:"50%"})," at the time of booking and the rest 50% amount post service"]}),(0,h.jsx)("div",{className:"mt-6 flex justify-end mb-5",children:(0,h.jsx)(d.A,{buttonText:"Book Now",faIcon:(0,h.jsx)(r.g$1,{size:"1.5rem",className:"ml-2 group-hover:scale-110 group-hover:!ml-5"}),buttonClass:"!w-96 !justify-end !text-xl",handleSubmit:()=>{t||I(!0),!z.isValid&&t?g("Please fill all the required fields","error"):z.handleSubmit()}})})]})]})}),B&&(0,h.jsx)(y.A,{title:"Are you sure you want to remove this service from the cart?",handleCancel:()=>A(!1),handlePrimaryButtonClick:()=>{x((0,b.ND)(T)),A(!1)},confirmButtonText:"Remove"}),P&&(0,h.jsx)(y.A,{title:"You have to login before booking our services!",handleCancel:()=>I(!1),handlePrimaryButtonClick:()=>p("/login"),confirmButtonText:"Login",confirmButtonColor:"bg-skyn hover:!opacity-80",imageSrc:w.A.images.Common.Warning})]})}},5399:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(5481),r=a(7340),l=a(7891),o=a(6723);const n=function(e){let{title:t,handleCancel:a,handlePrimaryButtonClick:n,confirmButtonText:i,confirmButtonColor:d="bg-red-600 hover:bg-red-700",imageSrc:c=l.A.images.Common.removeItem}=e;return(0,o.jsx)(s.N,{children:(0,o.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-slate-900/20 backdrop-blur p-4 fixed inset-0 z-50 md:grid place-items-center place-content-center overflow-scroll",children:(0,o.jsxs)(r.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.3},className:"bg-white p-8 rounded-lg w-full max-w-lg",children:[(0,o.jsx)("div",{className:"flex justify-center mb-4",children:(0,o.jsx)("img",{src:c,alt:"Confirmation Icon",className:"h-16"})}),(0,o.jsx)("h3",{className:"font-bold text-lg mb-4 text-center text-coal",children:t}),(0,o.jsxs)("div",{className:"flex flex-col md:!flex-row justify-center gap-4 mt-6",children:[(0,o.jsx)("button",{onClick:a,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,o.jsx)("button",{onClick:n,className:"text-white px-4 py-2 rounded-md ".concat(d," "),children:i})]})]})})})}},5831:(e,t,a)=>{a.d(t,{A:()=>s});const s={baseURL:"https://skynapi.duckdns.org/api/v1",Admin:{getAllUsers:"users/all",availableTechnicians:"admin/available-technicians"},Auth:{login:"/auth/login",loginAdmin:"/auth/login/admin",registerUser:"/auth/register",requestChangePassword:"/auth/request-password-change?email=",changePassword:"/auth/change-password"},Booking:{addServiceToCart:"/cart/add",updateServiceInCart:"/cart/update",getCartDetails:"/cart/",removeServiceFromCart:"/cart/remove/",clearCart:"/cart/clear/",reqBooking:"/booking/request",createBooking:"/booking/create"},Cart:{saveServiceCart:"/cart/add-update",getServiceCart:"/cart/"},Query:{newQuery:"/query/new",updateQueryStatus:"/query/",getAllQuery:"/query/all",getQueryWithFilter:"/query/status/"},Services:{getAllServices:"/services/all",createService:"/services/create"},Users:{addAddress:"/auth/user/add-address",getUserAddress:"/users/address",updateUserDetails:"/auth/update-user",updateUserAddress:"/auth/update-address",deleteUserAddress:"/auth/user/delete-address"}}},3245:(e,t,a)=>{a.d(t,{ND:()=>x,PC:()=>o,RO:()=>u,TC:()=>h,Ty:()=>m,a_:()=>c,bE:()=>i,bc:()=>p,dt:()=>d,od:()=>l,p:()=>r,y4:()=>n});var s=a(4731);const r=e=>({type:s.B6,payload:e}),l=e=>({type:s.kn,payload:e}),o=e=>({type:s.OR,payload:e}),n=()=>({type:s.b6}),i=e=>({type:s.l$,payload:e}),d=e=>({type:s.dy,payload:e}),c=()=>({type:s.v3}),u=(e,t)=>({type:s.u0,payload:{productId:e,quantity:t}}),m=e=>({type:s.mP,payload:e}),h=e=>({type:s.VR,payload:e}),x=e=>({type:s.By,payload:e}),p=()=>({type:s.xG})},9073:(e,t,a)=>{a.d(t,{Uz:()=>i,Zi:()=>n,a1:()=>l,a_:()=>o});var s=a(5831),r=a(1689);const l=async e=>{let{subServiceId:t}=e;try{return await r.P.delete("".concat(s.A.Booking.removeServiceFromCart).concat(t))}catch(a){throw console.log(a),new Error}},o=async e=>{let{userId:t}=e;try{return await r.P.delete("".concat(s.A.Booking.clearCart).concat(t))}catch(a){throw console.log(a),new Error}},n=async e=>{let{serviceId:t,subServiceId:a,date:l}=e;const o={serviceId:t,subServiceId:a,date:l};try{return await r.P.post(s.A.Booking.reqBooking,o)}catch(n){throw console.log(n),new Error}},i=async e=>{let{reqBody:t}=e;try{return await r.P.post(s.A.Booking.createBooking,t)}catch(a){throw console.log(a),new Error}}},7812:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(3451),r=a(6723);const l=function(e){let{buttonText:t="Book Now",handleSubmit:a,faIcon:l,buttonClass:o}=e;return(0,r.jsxs)(s.A,{variant:"contained",className:"!flex !items-center !justify-center gap-2 mt-4 w-full !bg-skyn !text-white py-2 px-4 rounded-md hover:bg-skyn-dark focus:outline-none focus:ring-2 focus:ring-skyn transition-all !shadow-[3px_3px_0px_black] hover:!shadow-none hover:!translate-x-[3px] hover:!translate-y-[3px] cursor-pointer ".concat(o),onClick:()=>a(),children:[l&&l," ",t]})}},3464:(e,t,a)=>{a.d(t,{A:()=>r});a(2483);var s=a(6723);const r=()=>(0,s.jsx)("div",{className:"my-6",children:(0,s.jsx)("hr",{style:{borderWidth:"0 0 4px",borderImage:"linear-gradient(90deg, rgba(238, 101, 3, 0), rgba(238, 101, 3, 1) 50%, rgba(238, 101, 3, 0) 100%) 0 0 100%",borderStyle:"solid",width:"100%"}})})},1689:(e,t,a)=>{a.d(t,{P:()=>o});var s=a(2555),r=a(4686),l=a(5831);const o=r.A.create({baseURL:l.A.baseURL}),n=r.A.create({baseURL:l.A.baseURL});o.interceptors.request.use((e=>(e.headers=(0,s.A)({},e.headers),e)),(e=>Promise.reject(e))),o.interceptors.response.use((e=>e.data),(e=>{var t;Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));const i=async()=>{const e=sessionStorage.getItem("token")||"";try{return e||(sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null)}catch(t){return sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null}};n.interceptors.request.use((async e=>{const t=await i();return e.headers=(0,s.A)({Authorization:"Bearer ".concat(t)},e.headers),e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e.data),(e=>{var t;Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))}}]);
//# sourceMappingURL=6939.71a8051f.chunk.js.map