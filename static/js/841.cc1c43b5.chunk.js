"use strict";(self.webpackChunkpure_skyn=self.webpackChunkpure_skyn||[]).push([[841],{5831:(e,s,a)=>{a.d(s,{A:()=>t});const t={baseURL:"https://skynapi.duckdns.org/api/v1",Admin:{getAllUsers:"users/all",availableTechnicians:"admin/available-technicians"},Auth:{login:"/auth/login",loginAdmin:"/auth/login/admin",registerUser:"/auth/register",requestChangePassword:"/auth/request-password-change?email=",changePassword:"/auth/change-password"},Booking:{getCartDetails:"/cart/",reqBooking:"/booking/request",createBooking:"/booking/create"},Cart:{saveServiceCart:"/cart/add-update",getServiceCart:"/cart/"},Query:{newQuery:"/query/new",updateQueryStatus:"/query/",getAllQuery:"/query/all",getQueryWithFilter:"/query/status/"},Services:{getAllServices:"/services/all",createService:"/services/create"},Users:{addAddress:"/auth/user/add-address",getUserAddress:"/users/address",updateUserDetails:"/auth/update-user",updateUserAddress:"/auth/update-address",deleteUserAddress:"/auth/user/delete-address"}}},841:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var t=a(3117),r=a(947),n=a(1481),o=a(5397),l=a(7340),d=a(2483),i=a(3376),c=a(4315),u=a(7757),h=a(6395),p=a(3912),w=a(8305),m=a(3378),x=a(3245),g=a(6723);const v=(0,d.lazy)((()=>Promise.all([a.e(2017),a.e(5570),a.e(6624),a.e(3715)]).then(a.bind(a,3105)))),y=(0,d.lazy)((()=>Promise.resolve().then(a.bind(a,7855))));const f=function(){var e,s,a;const f=(0,u.wA)(),b=(0,m.k)(),P=(0,i.Zp)(),k=new URLSearchParams((0,i.zy)().search).get("token"),[C,j]=(0,d.useState)(!1),[A,S]=(0,d.useState)(""),[N,q]=(0,d.useState)(!1),[E,R]=(0,d.useState)(!1),[B,L]=(0,d.useState)(!1),M=(0,o.A)("(max-width: 767px)"),U=(0,o.A)("(max-width: 1023px)"),{mutate:O,isSending:_}=(0,c.useMutation)(w.VJ,{onSuccess(e){"ERROR"===(null===e||void 0===e?void 0:e.status)?b("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error"):(j(!0),b("".concat(null===e||void 0===e?void 0:e.message),"success"))},onError(e){b(e,"error")}}),{mutate:T,isLoading:F}=(0,c.useMutation)(w.ec,{onSuccess(e){"ERROR"===(null===e||void 0===e?void 0:e.status)?b("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error"):(b(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.clear(),P("/login"),f((0,x.y4)()))},onError(e){b(e,"error")}}),z=(0,t.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:{oldPassword:"",newPassword:"",confirmNewPassword:""},validationSchema:r.Ik().shape({oldPassword:r.Yj().required("Required"),newPassword:r.Yj().required("Required"),confirmNewPassword:r.Yj().oneOf([r.KR("newPassword")],"Passwords Must Match").required("Required")}),onSubmit:e=>{T({token:k,oldPassword:e.oldPassword,newPassword:e.newPassword})}});return(0,g.jsxs)(l.P.div,{variants:(0,p.A)("left",.1),initial:"hidden",whileInView:"show",viewport:{once:!0},className:"mt-3 ".concat(U?"py-3":""),children:[(0,g.jsx)(d.Suspense,{fallback:(0,g.jsx)("div",{}),children:(0,g.jsx)(y,{open:_||F})}),(0,g.jsxs)("div",{className:"mt-3 p-5",children:[(0,g.jsx)(h.A,{heading:"Password Management",subHeading:"Change Your Password Here!"}),(0,g.jsxs)("div",{className:"flex flex-col shadow rounded-3xl w-full md:!w-1/2 ".concat(M?"p-4":"p-5"),children:[!C&&k&&(0,g.jsxs)("form",{children:[(0,g.jsx)(d.Suspense,{fallback:(0,g.jsx)("div",{}),children:(0,g.jsx)(v,{textClassOverride:"!text-kashmirBlue",type:N?"text":"password",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Current Password",name:"oldPassword",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(e=z.values)||void 0===e?void 0:e.oldPassword,onChange:z.handleChange,handleBlur:z.handleBlur,error:z.errors.oldPassword,touched:z.touched.oldPassword,iconEnd:N?(0,g.jsx)(n.Ny1,{}):(0,g.jsx)(n.mx3,{}),iconOnClick:()=>q(!N)})}),(0,g.jsx)(d.Suspense,{fallback:(0,g.jsx)("div",{}),children:(0,g.jsx)(v,{textClassOverride:"!text-kashmirBlue",type:E?"text":"password",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"New Password",name:"newPassword",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(s=z.values)||void 0===s?void 0:s.newPassword,onChange:z.handleChange,handleBlur:z.handleBlur,error:z.errors.newPassword,touched:z.touched.newPassword,iconEnd:E?(0,g.jsx)(n.Ny1,{}):(0,g.jsx)(n.mx3,{}),iconOnClick:()=>R(!E)})}),(0,g.jsx)(d.Suspense,{fallback:(0,g.jsx)("div",{}),children:(0,g.jsx)(v,{textClassOverride:"!text-kashmirBlue",type:B?"text":"password",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Confirm New Password",name:"confirmNewPassword",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(a=z.values)||void 0===a?void 0:a.confirmNewPassword,onChange:z.handleChange,handleBlur:z.handleBlur,error:z.errors.confirmNewPassword,touched:z.touched.confirmNewPassword,iconEnd:B?(0,g.jsx)(n.Ny1,{}):(0,g.jsx)(n.mx3,{}),iconOnClick:()=>L(!B)})}),(0,g.jsx)("button",{type:"submit",className:"w-full xl:!w-1/2 bg-skyn text-white py-2 px-4 rounded-md hover:bg-skyn-dark focus:outline-none transition-all shadow-[3px_3px_0px_#313440] hover:shadow-none hover:translate-x-[3px] hover:translate-y-[3px]",onClick:()=>z.handleSubmit(),children:"Change Password"})]}),!C&&!k&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.Suspense,{fallback:(0,g.jsx)("div",{}),children:(0,g.jsx)(v,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Enter Your Email",name:"email",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:A,onChange:e=>S(e.target.value)})}),(0,g.jsx)("button",{type:"submit",className:"w-full xl:!w-1/2 mt-4 bg-skyn text-white py-2 px-4 rounded-md hover:bg-skyn-dark focus:outline-none transition-all shadow-[3px_3px_0px_#313440] hover:shadow-none hover:translate-x-[3px] hover:translate-y-[3px]",onClick:()=>{O({email:A})},children:"Request Password Change"})]}),C&&!k&&(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("p",{className:"font-bold text-center text-emerald-900 text-xl",children:"Reset link is sent to your email. Please check."})})]})]})]})};const b=function(){return(0,g.jsx)("div",{children:(0,g.jsx)(f,{})})}},3245:(e,s,a)=>{a.d(s,{ND:()=>p,RO:()=>c,TC:()=>h,Ty:()=>u,a_:()=>i,bE:()=>l,bc:()=>w,dt:()=>d,od:()=>n,p:()=>r,y4:()=>o});var t=a(4731);const r=e=>({type:t.B6,payload:e}),n=e=>({type:t.kn,payload:e}),o=()=>({type:t.b6}),l=e=>({type:t.l$,payload:e}),d=e=>({type:t.dy,payload:e}),i=()=>({type:t.v3}),c=(e,s)=>({type:t.u0,payload:{productId:e,quantity:s}}),u=e=>({type:t.mP,payload:e}),h=e=>({type:t.VR,payload:e}),p=e=>({type:t.By,payload:e}),w=()=>({type:t.xG})},8305:(e,s,a)=>{a.d(s,{DY:()=>o,Lx:()=>n,VJ:()=>i,b7:()=>l,ec:()=>c,hf:()=>d});var t=a(5831),r=a(1689);const n=async e=>{let{email:s,password:a}=e;const n={email:s,password:a};try{return await r.P.post(t.A.Auth.login,n)}catch(o){throw console.log(o),new Error}},o=async e=>{let{name:s,email:a,password:n,phone:o}=e;const l={name:s,email:a,password:n,phone:o};try{return await r.P.post(t.A.Auth.registerUser,l)}catch(d){throw console.log(d),new Error}},l=async e=>{let{email:s,password:a}=e;const n={email:s,password:a};try{return await r.P.post(t.A.Auth.loginAdmin,n)}catch(o){throw console.log(o),new Error}},d=async e=>{let{firstName:s,lastName:a,email:n,password:o,phone:l}=e;const d={firstName:s,lastName:a,email:n,password:o,phone:l,role:"admin"};try{return await r.P.post(t.A.Auth.registerUser,d)}catch(i){throw console.log(i),new Error}},i=async e=>{let{email:s}=e;try{return await r.P.post("".concat(t.A.Auth.requestChangePassword).concat(s))}catch(a){throw console.log(a),new Error}},c=async e=>{let{token:s,oldPassword:a,newPassword:n}=e;const o={token:s,oldPassword:a,newPassword:n};try{return await r.P.post(t.A.Auth.changePassword,o)}catch(l){throw console.log(l),new Error}}},6395:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(5397),r=a(2483),n=a(1901),o=a(3376),l=a(6723);const d=e=>{let{navigateTo:s}=e;const a=(e=>{const s=(0,o.Zp)();return(0,r.useCallback)((()=>{e?s(e,{replace:!0}):s(-1)}),[e,s])})(s);return(0,l.jsx)("button",{type:"button",onClick:a,className:"h-8 w-8 p-1 mt-1 mr-2 flex justify-center items-center rounded-md shadow-[3px_3px_0px_black] border bg-white",children:(0,l.jsx)(n.xKz,{className:"text-black text-xl"})})};const i=function(e){let{heading:s,subHeading:a,showBackButton:r,navigateTo:n,headerClass:o}=e;const i=(0,t.A)("(max-width: 767px)");return(0,l.jsxs)("div",{className:"flex py-4 ".concat(i?"mt-5":"mt-4"),children:[r&&(0,l.jsx)(d,{navigateTo:n}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex flex-col font-poppins",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-skyn ".concat(o),children:s}),(0,l.jsx)("hr",{className:"h-1 !bg-skyn mb-2"})]}),a&&(0,l.jsx)("div",{className:"font-poppins text-xl font-extrabold",children:a})]})]})}},1689:(e,s,a)=>{a.d(s,{P:()=>o});var t=a(2555),r=a(4686),n=a(5831);const o=r.A.create({baseURL:n.A.baseURL}),l=r.A.create({baseURL:n.A.baseURL});o.interceptors.request.use((e=>(e.headers=(0,t.A)({},e.headers),e)),(e=>Promise.reject(e))),o.interceptors.response.use((e=>e.data),(e=>{var s;Promise.reject(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data)}));const d=async()=>{const e=sessionStorage.getItem("token")||"";try{return e||(sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null)}catch(s){return sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null}};l.interceptors.request.use((async e=>{const s=await d();return e.headers=(0,t.A)({Authorization:"Bearer ".concat(s)},e.headers),e}),(e=>Promise.reject(e))),l.interceptors.response.use((e=>e.data),(e=>{var s;Promise.reject(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data)}))},5397:(e,s,a)=>{var t;a.d(s,{A:()=>u});var r=a(2483),n=a(344),o=a(3898),l=a(1085);function d(e,s,a,t,o){const[l,d]=r.useState((()=>o&&a?a(e).matches:t?t(e).matches:s));return(0,n.A)((()=>{let s=!0;if(!a)return;const t=a(e),r=()=>{s&&d(t.matches)};return r(),t.addListener(r),()=>{s=!1,t.removeListener(r)}}),[e,a]),l}const i=(t||(t=a.t(r,2))).useSyncExternalStore;function c(e,s,a,t,n){const o=r.useCallback((()=>s),[s]),l=r.useMemo((()=>{if(n&&a)return()=>a(e).matches;if(null!==t){const{matches:s}=t(e);return()=>s}return o}),[o,e,t,n,a]),[d,c]=r.useMemo((()=>{if(null===a)return[o,()=>()=>{}];const s=a(e);return[()=>s.matches,e=>(s.addListener(e),()=>{s.removeListener(e)})]}),[o,a,e]);return i(c,d,l)}function u(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=(0,l.A)(),t="undefined"!==typeof window&&"undefined"!==typeof window.matchMedia,{defaultMatches:r=!1,matchMedia:n=(t?window.matchMedia:null),ssrMatchMedia:u=null,noSsr:h=!1}=(0,o.A)({name:"MuiUseMediaQuery",props:s,theme:a});let p="function"===typeof e?e(a):e;p=p.replace(/^@media( ?)/m,"");return(void 0!==i?c:d)(p,r,n,u,h)}},3898:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(1366);function r(e){const{theme:s,name:a,props:r}=e;return s&&s.components&&s.components[a]&&s.components[a].defaultProps?(0,t.A)(s.components[a].defaultProps,r):r}}}]);
//# sourceMappingURL=841.cc1c43b5.chunk.js.map