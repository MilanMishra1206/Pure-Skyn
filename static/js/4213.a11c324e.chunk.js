"use strict";(self.webpackChunkpure_skyn=self.webpackChunkpure_skyn||[]).push([[4213],{4213:(e,r,s)=>{s.d(r,{A:()=>f});var a=s(2483),t=s(3117),i=s(3376),o=s(4315),n=s(7757),l=s(7891),d=s(7080),c=s(9891),u=s(1481),m=s(7340),h=s(3912),p=s(6723);const v=(0,a.lazy)((()=>Promise.all([s.e(2442),s.e(2017),s.e(5570),s.e(6624),s.e(3715)]).then(s.bind(s,3105))));const g=function(e){var r,s;let{formik:t,handleSubmit:i,mobileClass:o,isAdminPage:n=!1}=e;const[d,g]=(0,a.useState)(!1);return(0,p.jsxs)(m.P.div,{variants:(0,h.A)("up",.1),initial:"hidden",whileInView:"show",viewport:{once:!0},className:"w-full max-w-md mx-auto bg-[#FFFFFF] md:shadow-lg md:rounded-3xl p-8 ".concat(o),children:[(0,p.jsx)("div",{className:"flex justify-center p-4",children:(0,p.jsx)("img",{src:l.A.images.Common.newLogoWhite,alt:"branding",className:"w-4/5 md:!w-3/5"})}),(0,p.jsx)("div",{className:"text-3xl font-poppins text-kashmirBlue font-extrabold mb-6 text-center",children:n?"SIGN IN ADMIN":"SIGN IN"}),(0,p.jsxs)("form",{className:"w-full",children:[(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Email Id",name:"email",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(r=t.values)||void 0===r?void 0:r.email,onChange:t.handleChange,handleBlur:t.handleBlur,error:t.errors.email,touched:t.touched.email})}),(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",type:d?"text":"password",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Password",name:"password",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(s=t.values)||void 0===s?void 0:s.password,onChange:t.handleChange,handleBlur:t.handleBlur,error:t.errors.password,touched:t.touched.password,iconEnd:d?(0,p.jsx)(u.Ny1,{}):(0,p.jsx)(u.mx3,{}),iconOnClick:()=>g(!d)})})]}),(0,p.jsx)("div",{className:"",children:(0,p.jsx)("p",{children:(0,p.jsx)(c.N_,{to:"/change-password",className:"underline text-skyn hover:!opacity-80 text-sm",children:"Forgot Password?"})})}),(0,p.jsx)("button",{type:"button",onClick:i,className:"mt-4 w-full bg-skyn text-white py-2 px-4 rounded-md hover:opacity-80 focus:outline-none focus:ring-2 focus:ring-skyn shadow-lg",children:"Sign In"}),!n&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mt-4 text-center",children:(0,p.jsxs)("p",{children:["Don't have an account?"," ",(0,p.jsx)(c.N_,{to:"/sign-up",className:"underline text-skyn hover:!opacity-80",children:"Sign up"})]})}),(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center md:!flex-row gap-4 mt-4",children:[(0,p.jsx)("div",{className:"text-center",children:(0,p.jsxs)("p",{children:["Go to"," ",(0,p.jsx)(c.N_,{to:"/",className:"underline text-skyn hover:!opacity-80",children:"Dashboard"})]})}),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsxs)("p",{children:["Go to"," ",(0,p.jsx)(c.N_,{to:"/login/admin",className:"underline text-skyn hover:!opacity-80",children:"Admin Login"})]})})]})]}),n&&(0,p.jsx)("div",{className:"mt-2 text-center",children:(0,p.jsxs)("p",{children:["Go to"," ",(0,p.jsx)(c.N_,{to:"/login",className:"underline text-skyn hover:!opacity-80",children:"User Login"})]})})]})};var w=s(3378),y=s(8305),x=s(3245),b=s(3190),A=s(6399);const j=(0,a.lazy)((()=>Promise.resolve().then(s.bind(s,7855))));const f=function(e){let{isAdminPage:r=!1}=e;const s=(0,w.k)(),c=(0,i.zy)(),u=(0,i.Zp)(),m=(0,n.wA)(),{mutate:h}=(0,o.useMutation)(b.GA,{onSuccess(e){"SUCCESS"===(null===e||void 0===e?void 0:e.status)?m((0,x.od)({addresses:null===e||void 0===e?void 0:e.data})):s(e.message,"error")},onError(e){s(e.message,"error")}}),{mutate:v,isLoading:f}=(0,o.useMutation)(A.a,{onSuccess:e=>{"SUCCESS"===(null===e||void 0===e?void 0:e.status)?m((0,x.Ty)(null===e||void 0===e?void 0:e.data[0].packageDetails)):m((0,x.Ty)([]))},onError:()=>{m((0,x.Ty)([]))}}),{mutate:q,isLoading:N}=(0,o.useMutation)(y.Lx,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){var r;const a=null===e||void 0===e?void 0:e.data,{id:t,email:i,name:o,phone:n,gender:l,role:d}=a;s(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===a||void 0===a?void 0:a.token),m((0,x.p)({userId:t,email:i,name:o,phone:n,gender:l,isAdmin:"ROLE_ADMIN"===d})),h({userId:t}),v({userId:t});const p=(null===(r=c.state)||void 0===r?void 0:r.redirectTo)||"/";setTimeout((()=>{u(p,{replace:!0})}),0)}else s("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){s(e,"error")}}),{mutate:S,isLoading:P}=(0,o.useMutation)(y.b7,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const r=null===e||void 0===e?void 0:e.data,{id:a,email:t,name:i,phone:o,gender:n,role:l}=r;s(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===r||void 0===r?void 0:r.token),m((0,x.p)({userId:a,email:t,name:i,phone:o,gender:n,isAdmin:"ROLE_ADMIN"===l})),u("/")}else s("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){s(e,"error")}}),k=(0,t.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:d.Cq,validationSchema:d.B7,onSubmit:e=>{var s,a;r?S({email:null===(s=e.email)||void 0===s?void 0:s.toLowerCase(),password:e.password}):q({email:null===(a=e.email)||void 0===a?void 0:a.toLowerCase(),password:e.password})}}),C=()=>{k.isValid?k.handleSubmit():s("Please fill all the required details!","error")};return(0,p.jsxs)("div",{className:"md:flex md:justify-center md:items-center min-h-screen relative bg-[#FAFAFA]",children:[(0,p.jsx)(a.Suspense,{children:(0,p.jsx)(j,{open:N||f||P})}),(0,p.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-cover bg-center hidden md:block",style:{backgroundImage:"url(".concat(l.A.images.Login.loginBg,")")}}),(0,p.jsx)("div",{className:"w-full h-full flex flex-col md:flex-row justify-end items-center z-10 relative",children:(0,p.jsx)("div",{className:"hidden md:flex w-full md:w-1/2 p-8 flex-col justify-center items-center",children:(0,p.jsx)(g,{formik:k,handleSubmit:C,isAdminPage:r})})}),(0,p.jsx)("div",{className:"md:hidden w-full h-full absolute flex",children:(0,p.jsx)(g,{formik:k,handleSubmit:C,mobileClass:"flex flex-col items-center",isAdminPage:r})})]})}},5831:(e,r,s)=>{s.d(r,{A:()=>a});const a={baseURL:"https://skynapi.duckdns.org/api/v1",Admin:{getAllUsers:"users/all",availableTechnicians:"admin/available-technicians"},Auth:{login:"/auth/login",loginAdmin:"/admin/login",registerUser:"/admin/register",requestChangePassword:"/auth/request-password-change?email=",changePassword:"/auth/change-password"},Booking:{getCartDetails:"/cart/",reqBooking:"/booking/request",createBooking:"/booking/create",getUserBookings:"/booking",updateSession:"/session/update",updateSessionStatus:"/session"},Cart:{saveServiceCart:"/cart/add-update",getServiceCart:"/cart/"},Products:{getAllProducts:"/products/all",getProductsByCategory:"/products/category"},Query:{newQuery:"/query/new",updateQueryStatus:"/query/",getAllQuery:"/query/all",getQueryWithFilter:"/query/status/"},Services:{getAllServices:"/services/all",createService:"/services/create"},Users:{addAddress:"/auth/user/add-address",getUserAddress:"/users/address",updateUserDetails:"/auth/update-user",updateUserAddress:"/auth/update-address",deleteUserAddress:"/auth/user/delete-address"}}},7080:(e,r,s)=>{s.d(r,{B7:()=>o,Cq:()=>i,Xx:()=>c,_I:()=>l,c_:()=>u,d7:()=>d,w9:()=>n});var a=s(947),t=s(6946);s(2483),s(6723);const i={email:"",password:""},o=()=>a.Ik().shape({email:a.Yj().email("Please Enter Valid Email").required("Email is required"),password:a.Yj().required("Password is required")}),n={name:"",email:"",phone:"",password:"",confirmPassword:""},l=()=>a.Ik().shape({name:a.Yj().required("Name is required"),email:a.Yj().email("Please Enter Valid Email").required("Email is required"),phone:a.Yj().required("Phone number is required").matches(t.y.mobileNumber,"Enter Valid Phone Number"),password:a.Yj().required("Password is required"),confirmPassword:a.Yj().oneOf([a.KR("password")],"Password Must Match").required("Confirm password is required")}),d=()=>a.Ik().shape({name:a.Yj().required("Name is required"),email:a.Yj().email("Please Enter Valid Email").required("Email is required"),mobile:a.Yj().matches(t.y.mobileNumber,"Please Enter Valid Mobile Number").required("Mobile number is required"),address:a.Yj().required("Address is required"),treatmentDate:a.Yj().required("Date is required"),timeSlot:a.Yj().required("Please select a time slot"),city:a.Yj().required("City is required")}),c=()=>a.Ik().shape({fullName:a.Yj().required("Full name is required"),email:a.Yj().email("Please Enter Valid Email").required("Email is required"),rating:a.ai().required("Rating is required"),description:a.Yj().required("Description is required").min(10,"Description must be at least 10 characters").max(250,"Description cannot exceed 250 characters").test("word-count","Description must be between 2 and 50 words",(e=>{const r=e?e.trim().split(/\s+/).length:0;return r>=2&&r<=50}))}),u=()=>a.Ik().shape({name:a.Yj().required("Name is required"),phone:a.Yj().matches(t.y.mobileNumber,"Please Enter Valid Mobile Number").required("Mobile Number is required"),serviceId:a.Yj().required("Select Service Option")})},6946:(e,r,s)=>{s.d(r,{H:()=>t,y:()=>a});const a={numeric:/^[0-9]*$/,alphabet:/^[a-zA-Z.]+$/,alphabetWithSpace:/^[a-zA-Z ]*$/,alphabetNumberWithSpace:/^[a-zA-Z0-9\s&-. ]*$/,stringWithSpaces:/^[a-zA-Z0-9\s!@#$%^&*()-_=+[\]{}|;:'",.<>/?]*$/,mobileNumber:/^[56789]\d{9}$/,noRepeatMobileNumber:/^(?!.*(\d)\1{4})[56789]\d{9}$/,stringWithoutSpecialCharacters:/^[^~^|`?+\-=<>@$%*]+$/,emailValidationRegex:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,alphaNumeric:/^[a-zA-Z0-9\s]*$/};function t(e){return"\u20b9".concat(new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e))}},3245:(e,r,s)=>{s.d(r,{ND:()=>h,RO:()=>c,TC:()=>m,Ty:()=>u,a_:()=>d,bE:()=>n,bc:()=>p,dt:()=>l,od:()=>i,p:()=>t,y4:()=>o});var a=s(7112);const t=e=>({type:a.B6,payload:e}),i=e=>({type:a.kn,payload:e}),o=()=>({type:a.b6}),n=e=>({type:a.l$,payload:e}),l=e=>({type:a.dy,payload:e}),d=()=>({type:a.v3}),c=(e,r)=>({type:a.u0,payload:{productId:e,quantity:r}}),u=e=>({type:a.mP,payload:e}),m=e=>({type:a.VR,payload:e}),h=e=>({type:a.By,payload:e}),p=()=>({type:a.xG})},8305:(e,r,s)=>{s.d(r,{DY:()=>o,Lx:()=>i,VJ:()=>d,b7:()=>n,ec:()=>c,hf:()=>l});var a=s(5831),t=s(1689);const i=async e=>{let{email:r,password:s}=e;const i={email:r,password:s};try{return await t.P.post(a.A.Auth.login,i)}catch(o){throw console.log(o),new Error}},o=async e=>{let{name:r,email:s,password:i,phone:o}=e;const n={name:r,email:s,password:i,phone:o};try{return await t.P.post(a.A.Auth.registerUser,n)}catch(l){throw console.log(l),new Error}},n=async e=>{let{email:r,password:s}=e;const i={email:r,password:s};try{return await t.P.post(a.A.Auth.loginAdmin,i)}catch(o){throw console.log(o),new Error}},l=async e=>{let{name:r,email:s,password:i,phone:o}=e;const n={name:r,email:s,password:i,phone:o};try{return await t.P.post(a.A.Auth.registerUser,n)}catch(l){throw console.log(l),new Error}},d=async e=>{let{email:r}=e;try{return await t.P.post("".concat(a.A.Auth.requestChangePassword).concat(r))}catch(s){throw console.log(s),new Error}},c=async e=>{let{token:r,oldPassword:s,newPassword:i}=e;const o={token:r,oldPassword:s,newPassword:i};try{return await t.P.post(a.A.Auth.changePassword,o)}catch(n){throw console.log(n),new Error}}},6399:(e,r,s)=>{s.d(r,{P:()=>o,a:()=>i});var a=s(5831),t=s(1689);const i=async e=>{let{userId:r}=e;try{return await t.P.get("".concat(a.A.Cart.getServiceCart).concat(r))}catch(o){var s,i;throw new Error(null===o||void 0===o||null===(s=o.data)||void 0===s||null===(i=s.error)||void 0===i?void 0:i.message)}},o=async e=>{let{reqBody:r}=e;try{return await t.P.post(a.A.Cart.saveServiceCart,r)}catch(s){throw console.log(s),new Error}}},3190:(e,r,s)=>{s.d(r,{DG:()=>n,GA:()=>o,Z1:()=>d,vN:()=>i,xu:()=>l});var a=s(5831),t=s(1689);const i=async e=>{let{userId:r,addressDetails:s}=e;const i={userId:r,address:s};try{return await t.P.post("".concat(a.A.Users.addAddress),i)}catch(l){var o,n;throw new Error(null===l||void 0===l||null===(o=l.data)||void 0===o||null===(n=o.error)||void 0===n?void 0:n.message)}},o=async e=>{let{userId:r}=e;try{return await t.P.get("".concat(a.A.Users.getUserAddress,"/").concat(r))}catch(o){var s,i;throw new Error(null===o||void 0===o||null===(s=o.data)||void 0===s||null===(i=s.error)||void 0===i?void 0:i.message)}},n=async e=>{let{reqBody:r}=e;try{return await t.P.put(a.A.Users.updateUserDetails,r)}catch(o){var s,i;throw new Error(null===o||void 0===o||null===(s=o.data)||void 0===s||null===(i=s.error)||void 0===i?void 0:i.message)}},l=async e=>{let{reqBody:r}=e;try{return await t.P.put(a.A.Users.updateUserAddress,r)}catch(o){var s,i;throw new Error(null===o||void 0===o||null===(s=o.data)||void 0===s||null===(i=s.error)||void 0===i?void 0:i.message)}},d=async e=>{let{userId:r,addressId:s}=e;try{return await t.P.delete("".concat(a.A.Users.deleteUserAddress,"?userId=").concat(r,"&addressId=").concat(s))}catch(n){var i,o;throw new Error(null===n||void 0===n||null===(i=n.data)||void 0===i||null===(o=i.error)||void 0===o?void 0:o.message)}}},1689:(e,r,s)=>{s.d(r,{P:()=>o,S:()=>n});var a=s(2555),t=s(4686),i=s(5831);const o=t.A.create({baseURL:i.A.baseURL}),n=t.A.create({baseURL:i.A.baseURL});o.interceptors.request.use((e=>(e.headers=(0,a.A)({},e.headers),e)),(e=>Promise.reject(e))),o.interceptors.response.use((e=>e.data),(e=>{var r;Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}));const l=async()=>{const e=sessionStorage.getItem("token")||"";try{return e||(sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null)}catch(r){return sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null}};n.interceptors.request.use((async e=>{const r=await l();return e.headers=(0,a.A)({Authorization:"Bearer ".concat(r)},e.headers),e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e.data),(e=>{var r;Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}))}}]);
//# sourceMappingURL=4213.a11c324e.chunk.js.map