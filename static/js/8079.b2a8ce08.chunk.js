"use strict";(self.webpackChunkpure_skyn=self.webpackChunkpure_skyn||[]).push([[8079],{4213:(e,t,r)=>{r.d(t,{A:()=>C});var a=r(2483),s=r(3117),o=r(3376),n=r(4315),l=r(7757),i=r(7891),d=r(7080),c=r(9891),u=r(1481),h=r(7340),m=r(3912),p=r(6723);const v=(0,a.lazy)((()=>Promise.all([r.e(2017),r.e(5570),r.e(6624),r.e(3715)]).then(r.bind(r,3105))));const w=function(e){var t,r;let{formik:s,handleSubmit:o,mobileClass:n,isAdminPage:l=!1}=e;const[d,w]=(0,a.useState)(!1);return(0,p.jsxs)(h.P.div,{variants:(0,m.A)("up",.1),initial:"hidden",whileInView:"show",viewport:{once:!0},className:"w-full max-w-md mx-auto bg-[#FFFFFF] md:shadow-lg md:rounded-3xl p-8 ".concat(n),children:[(0,p.jsx)("div",{className:"flex justify-center p-4",children:(0,p.jsx)("img",{src:i.A.images.Common.newLogoWhite,alt:"branding",className:"w-4/5 md:!w-3/5"})}),(0,p.jsx)("div",{className:"text-3xl font-poppins text-kashmirBlue font-extrabold mb-6 text-center",children:l?"SIGN IN ADMIN":"SIGN IN"}),(0,p.jsxs)("form",{className:"w-full",children:[(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Email Id",name:"email",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(t=s.values)||void 0===t?void 0:t.email,onChange:s.handleChange,handleBlur:s.handleBlur,error:s.errors.email,touched:s.touched.email})}),(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",type:d?"text":"password",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Password",name:"password",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(r=s.values)||void 0===r?void 0:r.password,onChange:s.handleChange,handleBlur:s.handleBlur,error:s.errors.password,touched:s.touched.password,iconEnd:d?(0,p.jsx)(u.Ny1,{}):(0,p.jsx)(u.mx3,{}),iconOnClick:()=>w(!d)})})]}),(0,p.jsx)("div",{className:"",children:(0,p.jsx)("p",{children:(0,p.jsx)(c.N_,{to:"/change-password",className:"underline text-skyn hover:!opacity-80 text-sm",children:"Forgot Password?"})})}),(0,p.jsx)("button",{type:"button",onClick:o,className:"mt-4 w-full bg-skyn text-white py-2 px-4 rounded-md hover:opacity-80 focus:outline-none focus:ring-2 focus:ring-skyn shadow-lg",children:"Sign In"}),!l&&(0,p.jsx)("div",{className:"mt-4 text-center",children:(0,p.jsxs)("p",{children:["Don't have an account?"," ",(0,p.jsx)(c.N_,{to:"/sign-up",className:"underline text-skyn hover:!opacity-80",children:"Sign up"})]})}),!l&&(0,p.jsx)("div",{className:"mt-4 text-center",children:(0,p.jsxs)("p",{children:["Go to"," ",(0,p.jsx)(c.N_,{to:"/",className:"underline text-skyn hover:!opacity-80",children:"Dashboard"})]})})]})};var g=r(3378),y=r(8305),x=r(3245),f=r(3190),b=r(6399);const A=(0,a.lazy)((()=>Promise.resolve().then(r.bind(r,7855))));const C=function(e){let{isAdminPage:t=!1}=e;const r=(0,g.k)(),c=(0,o.Zp)(),u=(0,l.wA)(),{mutate:h}=(0,n.useMutation)(f.GA,{onSuccess(e){"SUCCESS"===(null===e||void 0===e?void 0:e.status)?u((0,x.od)({addresses:null===e||void 0===e?void 0:e.data})):r(e.message,"error")},onError(e){r(e.message,"error")}}),{mutate:m,isLoading:v}=(0,n.useMutation)(b.a,{onSuccess:e=>{"SUCCESS"===(null===e||void 0===e?void 0:e.status)?u((0,x.Ty)(null===e||void 0===e?void 0:e.data[0].packageDetails)):u((0,x.Ty)([]))},onError:()=>{u((0,x.Ty)([]))}}),{mutate:C,isLoading:S}=(0,n.useMutation)(y.Lx,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const t=null===e||void 0===e?void 0:e.data,{id:a,email:s,name:o,phone:n,gender:l}=t;r(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===t||void 0===t?void 0:t.token),u((0,x.p)({userId:a,email:s,name:o,phone:n,gender:l})),h({userId:a}),m({userId:a}),c("/")}else r("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){r(e,"error")}}),{mutate:j,isLoading:k}=(0,n.useMutation)(y.b7,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const t=null===e||void 0===e?void 0:e.data,{id:a,email:s,name:o,phone:n,gender:l,isAdmin:i}=t;r(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===t||void 0===t?void 0:t.token),u((0,x.p)({userId:a,email:s,name:o,phone:n,gender:l,isAdmin:i})),c("/")}else r("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){r(e,"error")}}),P=(0,s.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:d.Cq,validationSchema:d.B7,onSubmit:e=>{t?j({email:e.email.toLowerCase(),password:e.password}):C({email:e.email.toLowerCase(),password:e.password})}}),N=()=>{P.isValid?P.handleSubmit():r("Please fill all the required details!","error")};return(0,p.jsxs)("div",{className:"md:flex md:justify-center md:items-center min-h-screen relative bg-[#FAFAFA]",children:[(0,p.jsx)(a.Suspense,{children:(0,p.jsx)(A,{open:S||v||k})}),(0,p.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-cover bg-center hidden md:block",style:{backgroundImage:"url(".concat(i.A.images.Login.loginBg,")")}}),(0,p.jsx)("div",{className:"w-full h-full flex flex-col md:flex-row justify-end items-center z-10 relative",children:(0,p.jsx)("div",{className:"hidden md:flex w-full md:w-1/2 p-8 flex-col justify-center items-center",children:(0,p.jsx)(w,{formik:P,handleSubmit:N,isAdminPage:t})})}),(0,p.jsx)("div",{className:"md:hidden w-full h-full absolute flex",children:(0,p.jsx)(w,{formik:P,handleSubmit:N,mobileClass:"flex flex-col items-center",isAdminPage:t})})]})}},5831:(e,t,r)=>{r.d(t,{A:()=>a});const a={baseURL:"https://skynapi.duckdns.org/api/v1",Admin:{getAllUsers:"users/all",availableTechnicians:"admin/available-technicians"},Auth:{login:"/auth/login",loginAdmin:"/auth/login/admin",registerUser:"/auth/register",requestChangePassword:"/auth/request-password-change?email=",changePassword:"/auth/change-password"},Booking:{getCartDetails:"/cart/",reqBooking:"/booking/request",createBooking:"/booking/create"},Cart:{saveServiceCart:"/cart/add-update",getServiceCart:"/cart/"},Query:{newQuery:"/query/new",updateQueryStatus:"/query/",getAllQuery:"/query/all",getQueryWithFilter:"/query/status/"},Services:{getAllServices:"/services/all",createService:"/services/create"},Users:{addAddress:"/auth/user/add-address",getUserAddress:"/users/address",updateUserDetails:"/auth/update-user",updateUserAddress:"/auth/update-address",deleteUserAddress:"/auth/user/delete-address"}}},3245:(e,t,r)=>{r.d(t,{ND:()=>m,RO:()=>c,TC:()=>h,Ty:()=>u,a_:()=>d,bE:()=>l,bc:()=>p,dt:()=>i,od:()=>o,p:()=>s,y4:()=>n});var a=r(4731);const s=e=>({type:a.B6,payload:e}),o=e=>({type:a.kn,payload:e}),n=()=>({type:a.b6}),l=e=>({type:a.l$,payload:e}),i=e=>({type:a.dy,payload:e}),d=()=>({type:a.v3}),c=(e,t)=>({type:a.u0,payload:{productId:e,quantity:t}}),u=e=>({type:a.mP,payload:e}),h=e=>({type:a.VR,payload:e}),m=e=>({type:a.By,payload:e}),p=()=>({type:a.xG})},8305:(e,t,r)=>{r.d(t,{DY:()=>n,Lx:()=>o,VJ:()=>d,b7:()=>l,ec:()=>c,hf:()=>i});var a=r(5831),s=r(1689);const o=async e=>{let{email:t,password:r}=e;const o={email:t,password:r};try{return await s.P.post(a.A.Auth.login,o)}catch(n){throw console.log(n),new Error}},n=async e=>{let{name:t,email:r,password:o,phone:n}=e;const l={name:t,email:r,password:o,phone:n};try{return await s.P.post(a.A.Auth.registerUser,l)}catch(i){throw console.log(i),new Error}},l=async e=>{let{email:t,password:r}=e;const o={email:t,password:r};try{return await s.P.post(a.A.Auth.loginAdmin,o)}catch(n){throw console.log(n),new Error}},i=async e=>{let{firstName:t,lastName:r,email:o,password:n,phone:l}=e;const i={firstName:t,lastName:r,email:o,password:n,phone:l,role:"admin"};try{return await s.P.post(a.A.Auth.registerUser,i)}catch(d){throw console.log(d),new Error}},d=async e=>{let{email:t}=e;try{return await s.P.post("".concat(a.A.Auth.requestChangePassword).concat(t))}catch(r){throw console.log(r),new Error}},c=async e=>{let{token:t,oldPassword:r,newPassword:o}=e;const n={token:t,oldPassword:r,newPassword:o};try{return await s.P.post(a.A.Auth.changePassword,n)}catch(l){throw console.log(l),new Error}}},6399:(e,t,r)=>{r.d(t,{P:()=>n,a:()=>o});var a=r(5831),s=r(1689);const o=async e=>{let{userId:t}=e;try{return await s.P.get("".concat(a.A.Cart.getServiceCart).concat(t))}catch(n){var r,o;throw new Error(null===n||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.error)||void 0===o?void 0:o.message)}},n=async e=>{let{reqBody:t}=e;try{return await s.P.post(a.A.Cart.saveServiceCart,t)}catch(r){throw console.log(r),new Error}}},3190:(e,t,r)=>{r.d(t,{DG:()=>l,GA:()=>n,Z1:()=>d,vN:()=>o,xu:()=>i});var a=r(5831),s=r(1689);const o=async e=>{let{userId:t,addressDetails:r}=e;const o={userId:t,address:r};try{return await s.P.post("".concat(a.A.Users.addAddress),o)}catch(i){var n,l;throw new Error(null===i||void 0===i||null===(n=i.data)||void 0===n||null===(l=n.error)||void 0===l?void 0:l.message)}},n=async e=>{let{userId:t}=e;try{return await s.P.get("".concat(a.A.Users.getUserAddress,"/").concat(t))}catch(n){var r,o;throw new Error(null===n||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.error)||void 0===o?void 0:o.message)}},l=async e=>{let{reqBody:t}=e;try{return await s.P.put(a.A.Users.updateUserDetails,t)}catch(n){var r,o;throw new Error(null===n||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.error)||void 0===o?void 0:o.message)}},i=async e=>{let{reqBody:t}=e;try{return await s.P.put(a.A.Users.updateUserAddress,t)}catch(n){var r,o;throw new Error(null===n||void 0===n||null===(r=n.data)||void 0===r||null===(o=r.error)||void 0===o?void 0:o.message)}},d=async e=>{let{userId:t,addressId:r}=e;try{return await s.P.delete("".concat(a.A.Users.deleteUserAddress,"?userId=").concat(t,"&addressId=").concat(r))}catch(l){var o,n;throw new Error(null===l||void 0===l||null===(o=l.data)||void 0===o||null===(n=o.error)||void 0===n?void 0:n.message)}}},1689:(e,t,r)=>{r.d(t,{P:()=>n});var a=r(2555),s=r(4686),o=r(5831);const n=s.A.create({baseURL:o.A.baseURL}),l=s.A.create({baseURL:o.A.baseURL});n.interceptors.request.use((e=>(e.headers=(0,a.A)({},e.headers),e)),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e.data),(e=>{var t;Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}));const i=async()=>{const e=sessionStorage.getItem("token")||"";try{return e||(sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null)}catch(t){return sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null}};l.interceptors.request.use((async e=>{const t=await i();return e.headers=(0,a.A)({Authorization:"Bearer ".concat(t)},e.headers),e}),(e=>Promise.reject(e))),l.interceptors.response.use((e=>e.data),(e=>{var t;Promise.reject(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data)}))},7112:(e,t,r)=>{r.d(t,{k5:()=>d});var a=r(2483),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=a.createContext&&a.createContext(s),n=function(){return n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)},l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r};function i(e){return e&&e.map((function(e,t){return a.createElement(e.tag,n({key:t},e.attr),i(e.child))}))}function d(e){return function(t){return a.createElement(c,n({attr:n({},e.attr)},t),i(e.child))}}function c(e){var t=function(t){var r,s=e.attr,o=e.size,i=e.title,d=l(e,["attr","size","title"]),c=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:r,style:n(n({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==o?a.createElement(o.Consumer,null,(function(e){return t(e)})):t(s)}}}]);
//# sourceMappingURL=8079.b2a8ce08.chunk.js.map