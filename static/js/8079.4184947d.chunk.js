"use strict";(self.webpackChunkpure_skyn=self.webpackChunkpure_skyn||[]).push([[8079],{4213:(e,r,t)=>{t.d(r,{A:()=>C});var a=t(2483),s=t(3117),o=t(3376),n=t(4315),l=t(7757),i=t(7891),d=t(7080),c=t(9891),u=t(1481),h=t(7340),m=t(3912),p=t(6723);const v=(0,a.lazy)((()=>Promise.all([t.e(2017),t.e(5570),t.e(6624),t.e(3715)]).then(t.bind(t,3105))));const w=function(e){var r,t;let{formik:s,handleSubmit:o,mobileClass:n,isAdminPage:l=!1}=e;const[d,w]=(0,a.useState)(!1);return(0,p.jsxs)(h.P.div,{variants:(0,m.A)("up",.1),initial:"hidden",whileInView:"show",viewport:{once:!0},className:"w-full max-w-md mx-auto bg-[#FFFFFF] md:shadow-lg md:rounded-3xl p-8 ".concat(n),children:[(0,p.jsx)("div",{className:"flex justify-center p-4",children:(0,p.jsx)("img",{src:i.A.images.Common.newLogoWhite,alt:"branding",className:"w-4/5 md:!w-3/5"})}),(0,p.jsx)("div",{className:"text-3xl font-poppins text-kashmirBlue font-extrabold mb-6 text-center",children:l?"SIGN IN ADMIN":"SIGN IN"}),(0,p.jsxs)("form",{className:"w-full",children:[(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Email Id",name:"email",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(r=s.values)||void 0===r?void 0:r.email,onChange:s.handleChange,handleBlur:s.handleBlur,error:s.errors.email,touched:s.touched.email})}),(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)("div",{}),children:(0,p.jsx)(v,{textClassOverride:"!text-kashmirBlue",type:d?"text":"password",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Password",name:"password",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(t=s.values)||void 0===t?void 0:t.password,onChange:s.handleChange,handleBlur:s.handleBlur,error:s.errors.password,touched:s.touched.password,iconEnd:d?(0,p.jsx)(u.Ny1,{}):(0,p.jsx)(u.mx3,{}),iconOnClick:()=>w(!d)})})]}),(0,p.jsx)("div",{className:"",children:(0,p.jsx)("p",{children:(0,p.jsx)(c.N_,{to:"/change-password",className:"underline text-skyn hover:!opacity-80 text-sm",children:"Forgot Password?"})})}),(0,p.jsx)("button",{type:"button",onClick:o,className:"mt-4 w-full bg-skyn text-white py-2 px-4 rounded-md hover:opacity-80 focus:outline-none focus:ring-2 focus:ring-skyn shadow-lg",children:"Sign In"}),!l&&(0,p.jsx)("div",{className:"mt-4 text-center",children:(0,p.jsxs)("p",{children:["Don't have an account?"," ",(0,p.jsx)(c.N_,{to:"/sign-up",className:"underline text-skyn hover:!opacity-80",children:"Sign up"})]})}),!l&&(0,p.jsx)("div",{className:"mt-4 text-center",children:(0,p.jsxs)("p",{children:["Go to"," ",(0,p.jsx)(c.N_,{to:"/",className:"underline text-skyn hover:!opacity-80",children:"Dashboard"})]})})]})};var g=t(3378),y=t(8305),x=t(3245),f=t(3190),b=t(6399);const A=(0,a.lazy)((()=>Promise.resolve().then(t.bind(t,7855))));const C=function(e){let{isAdminPage:r=!1}=e;const t=(0,g.k)(),c=(0,o.Zp)(),u=(0,l.wA)(),{mutate:h}=(0,n.useMutation)(f.GA,{onSuccess(e){"SUCCESS"===(null===e||void 0===e?void 0:e.status)?u((0,x.od)({addresses:null===e||void 0===e?void 0:e.data})):t(e.message,"error")},onError(e){t(e.message,"error")}}),{mutate:m,isLoading:v}=(0,n.useMutation)(b.a,{onSuccess:e=>{"SUCCESS"===(null===e||void 0===e?void 0:e.status)?u((0,x.Ty)(null===e||void 0===e?void 0:e.data[0].packageDetails)):u((0,x.Ty)([]))},onError:()=>{u((0,x.Ty)([]))}}),{mutate:C,isLoading:S}=(0,n.useMutation)(y.Lx,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const r=null===e||void 0===e?void 0:e.data,{id:a,email:s,name:o,phone:n,gender:l}=r;t(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===r||void 0===r?void 0:r.token),u((0,x.p)({userId:a,email:s,name:o,phone:n,gender:l})),h({userId:a}),m({userId:a}),c("/")}else t("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){t(e,"error")}}),{mutate:j,isLoading:P}=(0,n.useMutation)(y.b7,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const r=null===e||void 0===e?void 0:e.data,{id:a,email:s,name:o,phone:n,gender:l,isAdmin:i}=r;t(null===e||void 0===e?void 0:e.message,"success"),sessionStorage.setItem("token",null===r||void 0===r?void 0:r.token),u((0,x.p)({userId:a,email:s,name:o,phone:n,gender:l,isAdmin:i})),c("/")}else t("".concat(null===e||void 0===e?void 0:e.message,". Please try again!"),"error")},onError(e){t(e,"error")}}),k=(0,s.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:d.Cq,validationSchema:d.B7,onSubmit:e=>{r?j({email:e.email.toLowerCase(),password:e.password}):C({email:e.email.toLowerCase(),password:e.password})}}),N=()=>{k.isValid?k.handleSubmit():t("Please fill all the required details!","error")};return(0,p.jsxs)("div",{className:"md:flex md:justify-center md:items-center min-h-screen relative bg-[#FAFAFA]",children:[(0,p.jsx)(a.Suspense,{children:(0,p.jsx)(A,{open:S||v||P})}),(0,p.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-cover bg-center hidden md:block",style:{backgroundImage:"url(".concat(i.A.images.Login.loginBg,")")}}),(0,p.jsx)("div",{className:"w-full h-full flex flex-col md:flex-row justify-end items-center z-10 relative",children:(0,p.jsx)("div",{className:"hidden md:flex w-full md:w-1/2 p-8 flex-col justify-center items-center",children:(0,p.jsx)(w,{formik:k,handleSubmit:N,isAdminPage:r})})}),(0,p.jsx)("div",{className:"md:hidden w-full h-full absolute flex",children:(0,p.jsx)(w,{formik:k,handleSubmit:N,mobileClass:"flex flex-col items-center",isAdminPage:r})})]})}},5831:(e,r,t)=>{t.d(r,{A:()=>a});const a={baseURL:"https://skynapi.duckdns.org/api/v1",Admin:{getAllUsers:"users/all",availableTechnicians:"admin/available-technicians"},Auth:{login:"/auth/login",loginAdmin:"/auth/login/admin",registerUser:"/auth/register",requestChangePassword:"/auth/request-password-change?email=",changePassword:"/auth/change-password"},Booking:{addServiceToCart:"/cart/add",updateServiceInCart:"/cart/update",getCartDetails:"/cart/",removeServiceFromCart:"/cart/remove/",clearCart:"/cart/clear/",reqBooking:"/booking/request",createBooking:"/booking/create"},Cart:{saveServiceCart:"/cart/add-update",getServiceCart:"/cart/"},Query:{newQuery:"/query/new",updateQueryStatus:"/query/",getAllQuery:"/query/all",getQueryWithFilter:"/query/status/"},Services:{getAllServices:"/services/all",createService:"/services/create"},Users:{addAddress:"/auth/user/add-address",getUserAddress:"/users/address",updateUserDetails:"/auth/update-user",updateUserAddress:"/auth/update-address",deleteUserAddress:"/auth/user/delete-address"}}},3245:(e,r,t)=>{t.d(r,{ND:()=>p,PC:()=>n,RO:()=>u,TC:()=>m,Ty:()=>h,a_:()=>c,bE:()=>i,bc:()=>v,dt:()=>d,od:()=>o,p:()=>s,y4:()=>l});var a=t(4731);const s=e=>({type:a.B6,payload:e}),o=e=>({type:a.kn,payload:e}),n=e=>({type:a.OR,payload:e}),l=()=>({type:a.b6}),i=e=>({type:a.l$,payload:e}),d=e=>({type:a.dy,payload:e}),c=()=>({type:a.v3}),u=(e,r)=>({type:a.u0,payload:{productId:e,quantity:r}}),h=e=>({type:a.mP,payload:e}),m=e=>({type:a.VR,payload:e}),p=e=>({type:a.By,payload:e}),v=()=>({type:a.xG})},8305:(e,r,t)=>{t.d(r,{DY:()=>n,Lx:()=>o,VJ:()=>d,b7:()=>l,ec:()=>c,hf:()=>i});var a=t(5831),s=t(1689);const o=async e=>{let{email:r,password:t}=e;const o={email:r,password:t};try{return await s.P.post(a.A.Auth.login,o)}catch(n){throw console.log(n),new Error}},n=async e=>{let{name:r,email:t,password:o,phone:n}=e;const l={name:r,email:t,password:o,phone:n};try{return await s.P.post(a.A.Auth.registerUser,l)}catch(i){throw console.log(i),new Error}},l=async e=>{let{email:r,password:t}=e;const o={email:r,password:t};try{return await s.P.post(a.A.Auth.loginAdmin,o)}catch(n){throw console.log(n),new Error}},i=async e=>{let{firstName:r,lastName:t,email:o,password:n,phone:l}=e;const i={firstName:r,lastName:t,email:o,password:n,phone:l,role:"admin"};try{return await s.P.post(a.A.Auth.registerUser,i)}catch(d){throw console.log(d),new Error}},d=async e=>{let{email:r}=e;try{return await s.P.post("".concat(a.A.Auth.requestChangePassword).concat(r))}catch(t){throw console.log(t),new Error}},c=async e=>{let{token:r,oldPassword:t,newPassword:o}=e;const n={token:r,oldPassword:t,newPassword:o};try{return await s.P.post(a.A.Auth.changePassword,n)}catch(l){throw console.log(l),new Error}}},6399:(e,r,t)=>{t.d(r,{P:()=>n,a:()=>o});var a=t(5831),s=t(1689);const o=async e=>{let{userId:r}=e;try{return await s.P.get("".concat(a.A.Cart.getServiceCart).concat(r))}catch(n){var t,o;throw new Error(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(o=t.error)||void 0===o?void 0:o.message)}},n=async e=>{let{reqBody:r}=e;try{return await s.P.post(a.A.Cart.saveServiceCart,r)}catch(t){throw console.log(t),new Error}}},3190:(e,r,t)=>{t.d(r,{DG:()=>l,GA:()=>n,Z1:()=>d,vN:()=>o,xu:()=>i});var a=t(5831),s=t(1689);const o=async e=>{let{userId:r,addressDetails:t}=e;const o={userId:r,address:t};try{return await s.P.post("".concat(a.A.Users.addAddress),o)}catch(i){var n,l;throw new Error(null===i||void 0===i||null===(n=i.data)||void 0===n||null===(l=n.error)||void 0===l?void 0:l.message)}},n=async e=>{let{userId:r}=e;try{return await s.P.get("".concat(a.A.Users.getUserAddress,"/").concat(r))}catch(n){var t,o;throw new Error(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(o=t.error)||void 0===o?void 0:o.message)}},l=async e=>{let{reqBody:r}=e;try{return await s.P.put(a.A.Users.updateUserDetails,r)}catch(n){var t,o;throw new Error(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(o=t.error)||void 0===o?void 0:o.message)}},i=async e=>{let{reqBody:r}=e;try{return await s.P.put(a.A.Users.updateUserAddress,r)}catch(n){var t,o;throw new Error(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(o=t.error)||void 0===o?void 0:o.message)}},d=async e=>{let{userId:r,addressId:t}=e;try{return await s.P.delete("".concat(a.A.Users.deleteUserAddress,"?userId=").concat(r,"&addressId=").concat(t))}catch(l){var o,n;throw new Error(null===l||void 0===l||null===(o=l.data)||void 0===o||null===(n=o.error)||void 0===n?void 0:n.message)}}},1689:(e,r,t)=>{t.d(r,{P:()=>n});var a=t(2555),s=t(4686),o=t(5831);const n=s.A.create({baseURL:o.A.baseURL}),l=s.A.create({baseURL:o.A.baseURL});n.interceptors.request.use((e=>(e.headers=(0,a.A)({},e.headers),e)),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e.data),(e=>{var r;Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}));const i=async()=>{const e=sessionStorage.getItem("token")||"";try{return e||(sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null)}catch(r){return sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null}};l.interceptors.request.use((async e=>{const r=await i();return e.headers=(0,a.A)({Authorization:"Bearer ".concat(r)},e.headers),e}),(e=>Promise.reject(e))),l.interceptors.response.use((e=>e.data),(e=>{var r;Promise.reject(null===e||void 0===e||null===(r=e.response)||void 0===r?void 0:r.data)}))},7112:(e,r,t)=>{t.d(r,{k5:()=>d});var a=t(2483),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=a.createContext&&a.createContext(s),n=function(){return n=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e},n.apply(this,arguments)},l=function(e,r){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)r.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(t[a[s]]=e[a[s]])}return t};function i(e){return e&&e.map((function(e,r){return a.createElement(e.tag,n({key:r},e.attr),i(e.child))}))}function d(e){return function(r){return a.createElement(c,n({attr:n({},e.attr)},r),i(e.child))}}function c(e){var r=function(r){var t,s=e.attr,o=e.size,i=e.title,d=l(e,["attr","size","title"]),c=o||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,d,{className:t,style:n(n({color:e.color||r.color},r.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==o?a.createElement(o.Consumer,null,(function(e){return r(e)})):r(s)}}}]);
//# sourceMappingURL=8079.4184947d.chunk.js.map