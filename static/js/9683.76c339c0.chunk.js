"use strict";(self.webpackChunkpure_skyn=self.webpackChunkpure_skyn||[]).push([[9683],{5399:(e,s,a)=>{a.d(s,{A:()=>i});var l=a(5481),t=a(7340),r=a(7891),d=a(6723);const i=function(e){let{title:s,handleCancel:a,handlePrimaryButtonClick:i,confirmButtonText:n,confirmButtonColor:o="bg-red-600 hover:bg-red-700",imageSrc:c=r.A.images.Common.removeItem}=e;return(0,d.jsx)(l.N,{children:(0,d.jsx)(t.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"bg-slate-900/20 backdrop-blur p-4 fixed inset-0 z-50 md:grid place-items-center place-content-center overflow-scroll",children:(0,d.jsxs)(t.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.3},className:"bg-white p-8 rounded-lg w-full max-w-lg",children:[(0,d.jsx)("div",{className:"flex justify-center mb-4",children:(0,d.jsx)("img",{src:c,alt:"Confirmation Icon",className:"h-16"})}),(0,d.jsx)("h3",{className:"font-bold text-lg mb-4 text-center text-coal",children:s}),(0,d.jsxs)("div",{className:"flex flex-col md:!flex-row justify-center gap-4 mt-6",children:[(0,d.jsx)("button",{onClick:a,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,d.jsx)("button",{onClick:i,className:"text-white px-4 py-2 rounded-md ".concat(o," "),children:n})]})]})})})}},5831:(e,s,a)=>{a.d(s,{A:()=>l});const l={baseURL:"https://skynapi.duckdns.org/api/v1",Admin:{getAllUsers:"users/all",availableTechnicians:"admin/available-technicians"},Auth:{login:"/auth/login",loginAdmin:"/admin/login",registerUser:"/admin/register",requestChangePassword:"/auth/request-password-change?email=",changePassword:"/auth/change-password"},Booking:{getCartDetails:"/cart/",reqBooking:"/booking/request",createBooking:"/booking/create",getUserBookings:"/booking",updateSession:"/session/update"},Cart:{saveServiceCart:"/cart/add-update",getServiceCart:"/cart/"},Products:{getAllProducts:"/products/all",getProductsByCategory:"/products/category"},Query:{newQuery:"/query/new",updateQueryStatus:"/query/",getAllQuery:"/query/all",getQueryWithFilter:"/query/status/"},Services:{getAllServices:"/services/all",createService:"/services/create"},Users:{addAddress:"/auth/user/add-address",getUserAddress:"/users/address",updateUserDetails:"/auth/update-user",updateUserAddress:"/auth/update-address",deleteUserAddress:"/auth/user/delete-address"}}},5335:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(7340),t=a(6723);const r=e=>{let{children:s}=e;return(0,t.jsx)(l.P.div,{initial:{y:35,opacity:0},whileInView:{y:0,opacity:1},transition:{ease:"easeInOut",duration:.75},viewport:{once:!0},children:s})}},6946:(e,s,a)=>{a.d(s,{H:()=>t,y:()=>l});const l={numeric:/^[0-9]*$/,alphabet:/^[a-zA-Z.]+$/,alphabetWithSpace:/^[a-zA-Z ]*$/,alphabetNumberWithSpace:/^[a-zA-Z0-9\s&-. ]*$/,stringWithSpaces:/^[a-zA-Z0-9\s!@#$%^&*()-_=+[\]{}|;:'",.<>/?]*$/,mobileNumber:/^[56789]\d{9}$/,noRepeatMobileNumber:/^(?!.*(\d)\1{4})[56789]\d{9}$/,stringWithoutSpecialCharacters:/^[^~^|`?+\-=<>@$%*]+$/,emailValidationRegex:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,alphaNumeric:/^[a-zA-Z0-9\s]*$/};function t(e){return"\u20b9".concat(new Intl.NumberFormat("en-IN",{maximumFractionDigits:0}).format(e))}},9683:(e,s,a)=>{a.r(s),a.d(s,{default:()=>H});var l=a(2483),t=a(3117),r=a(947);const d={id:"",fullName:"",phone:"",addressLine1:"",addressLine2:"",city:"",state:"",pinCode:"",country:""},i=()=>r.Ik().shape({fullName:r.Yj().required("Name is required"),phone:r.Yj().matches(/^[0-9]{10}$/,"Enter a valid 10-digit contact number").required("Contact Number is required"),addressLine1:r.Yj().required("Required"),addressLine2:r.Yj().required("Required"),pinCode:r.Yj().length(6,"Enter exactly 6 digits").matches(/^[0-9]+$/,"Enter a valid Pincode").required("Pincode is required"),city:r.Yj().required("City is required"),state:r.Yj().required("State is required")}),n=()=>r.Ik().shape({name:r.Yj().required("Name is required"),phone:r.Yj().matches(/^[0-9]{10}$/,"Enter a valid 10-digit contact number").required("Mobile number is required"),email:r.Yj().email("Please Enter Valid Email").required("Required"),gender:r.Yj().required("Please select a gender")});var o=a(5397),c=a(5470),u=a(592),m=a(2751),h=a(1481),x=a(1901),p=a(3376),v=a(9891),g=a(4315),f=a(7757),b=a(3378),j=a(2555),y=a(5745),N=a(6946),C=a(3464),w=a(3190),S=a(3245),k=a(6723);const A=(0,l.lazy)((()=>Promise.all([a.e(2442),a.e(2017),a.e(5570),a.e(6624),a.e(3105)]).then(a.bind(a,3105)))),P=(0,l.lazy)((()=>Promise.resolve().then(a.bind(a,7855))));function L(e){var s,a,r;let{userProfile:d}=e;const i=(0,b.k)(),o=(0,f.wA)(),[c,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(""),[x,p]=(0,l.useState)({name:(null===d||void 0===d?void 0:d.name)||"",phone:(null===d||void 0===d?void 0:d.phone)||"",email:(null===d||void 0===d?void 0:d.email)||"",gender:(null===d||void 0===d?void 0:d.gender)||""});(0,l.useEffect)((()=>{const e=Object.values(x).some((e=>""===e));h(e?"Please update your profile!":"")}),[x]);const{mutate:v,isLoading:L}=(0,g.useMutation)(w.DG,{onSuccess(e){const s=null===e||void 0===e?void 0:e.data;"SUCCESS"===(null===e||void 0===e?void 0:e.status)?(u(!1),i(null===e||void 0===e?void 0:e.message,"success"),o((0,S.p)({userId:null===s||void 0===s?void 0:s.id,email:null===s||void 0===s?void 0:s.email,name:null===s||void 0===s?void 0:s.name,phone:null===s||void 0===s?void 0:s.phone,gender:null===s||void 0===s?void 0:s.gender})),p({name:null===s||void 0===s?void 0:s.name,phone:null===s||void 0===s?void 0:s.phone,email:null===s||void 0===s?void 0:s.email,gender:null===s||void 0===s?void 0:s.gender})):(u(!0),i(null===e||void 0===e?void 0:e.message,"error"))},onError(e){u(!0),i(null===e||void 0===e?void 0:e.message,"error")}}),B=(0,t.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:{name:(null===d||void 0===d?void 0:d.name)||"",phone:(null===d||void 0===d?void 0:d.phone)||"",email:(null===d||void 0===d?void 0:d.email)||"",gender:(null===d||void 0===d?void 0:d.gender)||""},validationSchema:n,onSubmit:e=>{const s=(0,j.A)({id:(null===d||void 0===d?void 0:d.userId)||""},e);v({reqBody:s})}});return(0,k.jsxs)("div",{className:"w-full",children:[(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{children:"Loading..."}),children:(0,k.jsx)(P,{open:L})}),m&&(0,k.jsxs)("small",{className:"text-bitterSweet",children:[(0,k.jsx)("strong",{className:"!text-black",children:"Note: "}),m]}),(0,k.jsxs)("form",{children:[(0,k.jsxs)("div",{className:"flex items-center gap-4 mb-4 justify-center mt-4",children:[(0,k.jsx)("span",{className:"font-semibold text-cello font-poppins text-lg md:!text-xl",children:"Personal Information"}),(0,k.jsx)(y.Pj4,{className:"text-gray-500 cursor-pointer hover:text-gray-800 transition",size:20,onClick:()=>u(!c)})]}),(0,k.jsx)(C.A,{}),(0,k.jsxs)("div",{className:"grid lg:!grid-cols-3 gap-3 font-poppins p-4",children:[(0,k.jsx)("div",{children:c?(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(A,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Full Name",name:"name",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",value:B.values.name,onChange:B.handleChange,handleBlur:B.handleBlur,error:B.errors.name,touched:B.touched.name})}):(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsx)("span",{className:"text-black font-medium",children:"Full Name"}),(0,k.jsxs)("span",{className:"text-kashmirBlue",children:[" ",B.values.name]})]})}),(0,k.jsx)("div",{children:c?(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(A,{textClassOverride:"!text-cello",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Contact Number",maxLength:10,regex:N.y.numeric,name:"phone",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",value:B.values.phone,onChange:B.handleChange,handleBlur:B.handleBlur,error:B.errors.phone,touched:B.touched.phone})}):(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsx)("span",{className:"text-black font-medium",children:"Phone"}),(0,k.jsxs)("span",{className:"text-cello font-poppins",children:[" ",B.values.phone]})]})}),(0,k.jsx)("div",{className:"flex flex-col",children:c?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("span",{className:"text-sm font-medium pb-1 !text-cello",children:["Gender",(0,k.jsx)("small",{className:"text-bitterSweet",children:"*"})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-2",children:["Male","Female","Others"].map(((e,s)=>(0,k.jsx)("button",{type:"button",className:"py-2 lg:px-4 rounded-lg text-sm font-medium transition-all border ".concat(B.values.gender===e?"bg-skyn text-white border-skyn shadow-md":"bg-white text-gray-700 border-gray-300 hover:bg-gray-100"),onClick:()=>B.setFieldValue("gender",e),children:e},s)))})]}):(0,k.jsxs)("div",{className:"flex flex-col",children:[" ",(0,k.jsx)("span",{className:"text-black font-medium",children:"Gender"}),(0,k.jsx)("span",{className:"text-cello",children:B.values.gender})]})}),(0,k.jsx)("div",{children:c?(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(A,{textClassOverride:"!text-cello",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,regex:/^[^!#$%^&*()=+{}[\]:;<>,?/~`|"\\ ]*$/,labelToShow:"Email Id",name:"email",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",maxLength:50,value:null===(s=B.values)||void 0===s?void 0:s.email,onChange:B.handleChange,handleBlur:B.handleBlur,error:null===(a=B.errors)||void 0===a?void 0:a.email,touched:null===(r=B.touched)||void 0===r?void 0:r.email})}):(0,k.jsxs)("div",{className:"flex flex-col",children:[" ",(0,k.jsx)("span",{className:"text-black font-medium",children:"Email Id"}),(0,k.jsx)("span",{className:"text-cello",children:B.values.email})]})})]})]}),c&&(0,k.jsxs)("div",{className:"flex gap-5",children:[(0,k.jsx)("div",{className:"mt-6 flex justify-end",children:(0,k.jsx)("button",{type:"button",className:"bg-aliceBlue-2 text-cello py-2 px-6 rounded-lg font-medium hover:opacity-80 transition-all",onClick:()=>{B.isValid?(u(!1),B.setValues(x)):i("Please fill required details!","error")},children:"Cancel"})}),(0,k.jsx)("div",{className:"mt-6 flex justify-end",children:(0,k.jsx)("button",{type:"button",className:"bg-skyn text-white py-2 px-6 rounded-lg font-medium hover:opacity-80 transition-all",onClick:()=>{B.isValid?B.handleSubmit():i("Please fill required details!","error")},children:"Update"})})]})]})}function B(e){let{orderHistory:s}=e;return(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"font-semibold text-cello font-poppins text-xl text-center",children:"My Orders"}),(0,k.jsx)(C.A,{}),(0,k.jsx)("div",{className:"grid grid-cols-1 gap-4",children:s.map((e=>(0,k.jsxs)("div",{className:"flex flex-col",children:[(0,k.jsx)("span",{className:"text-black",children:e.product}),(0,k.jsxs)("span",{className:"text-kashmirBlue",children:["Ordered on - ",e.orderedOn]})]},e.id)))})]})}var q=a(9073),I=a(3786),E=a(7340);const T=(0,l.lazy)((()=>Promise.all([a.e(2442),a.e(2017),a.e(6624),a.e(9215),a.e(5989),a.e(2552)]).then(a.bind(a,2552)))),U=["10:00 AM","11:00 AM","12:00 PM","2:00 PM","3:00 PM","4:00 PM"];const F=function(e){let{onClose:s,formik:a,handleSave:t,sessionNo:r}=e;return(0,k.jsx)(E.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,delayChildren:.3},className:"backdrop-blur bg-slate-900/20 fixed flex inset-0 items-center justify-center overflow-scroll p-4 z-50",children:(0,k.jsxs)(E.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.3,delayChildren:.3},className:"bg-white p-8 rounded-lg w-full max-w-lg",children:[(0,k.jsx)("div",{className:"text-center font-bold text-cello p-4",children:(0,k.jsxs)("span",{className:"font-bold",children:["Edit Session - ",r]})}),(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(T,{label:"Treatment Date",name:"treatmentDate",textClassToOverride:"!text-kashmirBlue",requiredStar:!0,disablePast:!0,className:"w-full rounded-md !bg-transparent shadow-insetLight",fieldWidth:"!w-full",setFieldValue:a.setFieldValue,setFieldTouched:a.setFieldTouched,value:a.values.treatmentDate,error:a.errors.treatmentDate,touched:a.touched.treatmentDate,inputClassName:"!text-kashmirBlue !font-poppins",onChange:a.handleChange,handleBlur:a.handleBlur})})}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsxs)("label",{htmlFor:"appointmentTime",className:"text-sm font-medium pb-1 !text-kashmirBlue",children:["Select Appointment Time ",(0,k.jsx)("span",{className:"text-bitterSweet",children:"*"})]}),(0,k.jsx)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:U.map(((e,s)=>(0,k.jsx)("button",{type:"button",onClick:()=>a.setFieldValue("appointmentTime",e),className:"p-2 rounded text-sm font-bold transition-all shadow-md ".concat(a.values.appointmentTime===e?"bg-skyn text-white border-skyn":"bg-white text-gray-700 hover:!bg-gray-100"),children:e},s)))}),a.errors.appointmentTime&&a.touched.appointmentTime&&(0,k.jsxs)("p",{className:"mt-1 ml-1 text-xs text-bitterSweet",children:[a.errors.appointmentTime,"*"]})]}),(0,k.jsxs)("div",{className:"flex flex-col md:!flex-row justify-center gap-2 mt-12",children:[(0,k.jsx)("button",{type:"button",role:"button",onClick:t,onTouchEnd:t,tabIndex:0,className:"bg-skyn text-white px-4 py-2 rounded-md hover:opacity-85 shadow-md w-full md:!w-50 cursor-pointer",children:"Save"}),(0,k.jsx)("button",{type:"button",onClick:s,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 shadow-md w-full md:!w-50",children:"Cancel"})]})]})})},O=(0,l.lazy)((()=>Promise.resolve().then(a.bind(a,7855))));function D(e){let{userProfile:s}=e;const a=(0,b.k)(),[d,i]=(0,l.useState)([]),[n,o]=(0,l.useState)(null),[c,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)(null),[x,p]=(0,l.useState)(1),{isFetching:v,refetch:f}=(0,g.useQuery)(["getUserBookings"],(()=>(0,q.W2)({userId:(null===s||void 0===s?void 0:s.userId)||""})),{refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:!1,onSuccess:e=>{"SUCCESS"===(null===e||void 0===e?void 0:e.status)?i(null===e||void 0===e?void 0:e.data):a(null===e||void 0===e?void 0:e.message,"error")},onError:()=>{a("Something went wrong! Please try again after sometime","error")}}),{mutate:j,isLoading:y}=(0,g.useMutation)(q.Zg,{onSuccess:e=>{"SUCCESS"===(null===e||void 0===e?void 0:e.status)?(a(null===e||void 0===e?void 0:e.message,"success"),u(!1),f()):a(null===e||void 0===e?void 0:e.message,"error")},onError:e=>{a(null===e||void 0===e?void 0:e.message,"error")}}),N=(0,t.Wx)({initialValues:{treatmentDate:(null===m||void 0===m?void 0:m.treatmentDate)||"",appointmentTime:(null===m||void 0===m?void 0:m.appointmentTime)||""},validationSchema:r.Ik({treatmentDate:r.Yj().required("Date is required"),appointmentTime:r.Yj().required("Time slot is required")}),onSubmit:e=>{const{appointmentTime:s,treatmentDate:a}=e,[l,t,r]=null===a||void 0===a?void 0:a.split("/"),d="".concat(r,"-").concat(t,"-").concat(l),i=new Date("".concat(d," ").concat(s)).toISOString(),n={id:null===m||void 0===m?void 0:m.id,appointmentTime:i,treatmentDate:d};j({reqBody:n})}});return(0,l.useEffect)((()=>{m&&N.setValues({treatmentDate:(null===m||void 0===m?void 0:m.treatmentDate)||"",appointmentTime:(null===m||void 0===m?void 0:m.appointmentTime)||""})}),[m]),(0,k.jsxs)("div",{children:[(0,k.jsx)(l.Suspense,{children:(0,k.jsx)(O,{open:v||y})}),(0,k.jsx)("p",{className:"font-semibold text-cello font-poppins text-xl text-center mt-4",children:"My Appointments"}),(0,k.jsx)(C.A,{}),(0,k.jsx)("div",{className:"grid gap-4 px-2",children:null===d||void 0===d?void 0:d.map(((e,a)=>{var l;const t=null===s||void 0===s||null===(l=s.addresses)||void 0===l?void 0:l.find((s=>{var a;return s.id===(null===e||void 0===e||null===(a=e.userInfo)||void 0===a?void 0:a.address)}));return(0,k.jsxs)("div",{className:"border rounded-md shadow-md",children:[(0,k.jsxs)("div",{onClick:()=>(e=>{o(n===e?null:e)})(a),className:"cursor-pointer flex justify-between items-center bg-gray-100 px-3 py-2 md:!px-4 md:!py-4 rounded-t-md",children:[(0,k.jsxs)("div",{className:"font-bold text-coal",children:["Booking #",a+1," -"," ",new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleString()]}),(0,k.jsx)("div",{className:"text-lg text-coal",children:n===a?"\u25b2":"\u25bc"})]}),n===a&&(0,k.jsxs)("div",{className:"p-3 bg-gray-50 rounded-b-md space-y-4",children:[(0,k.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,k.jsxs)("span",{className:"font-semibold text-denim",children:["Status:"," ",(0,k.jsx)("span",{className:"font-bold text-cello",children:null===e||void 0===e?void 0:e.status})]}),(0,k.jsxs)("span",{className:"font-semibold text-denim",children:["Created At:"," ",(0,k.jsx)("span",{className:"font-bold text-black",children:new Date(null===e||void 0===e?void 0:e.createdAt).toLocaleString()})]})]}),(0,k.jsxs)("div",{className:"border p-4 rounded",children:[(0,k.jsx)("p",{className:"text-xl font-semibold mb-2",children:"User Info"}),(0,k.jsx)("hr",{}),(0,k.jsxs)("div",{className:"grid lg:grid-cols-2 gap-2 mt-4",children:[(0,k.jsxs)("span",{className:"font-medium text-coal",children:[(0,k.jsx)("span",{className:"font-medium text-cello",children:"Name:"})," ",null===e||void 0===e?void 0:e.userInfo.name]}),(0,k.jsxs)("span",{className:"font-medium text-coal",children:[(0,k.jsx)("span",{className:"font-medium text-cello",children:"Email:"})," ",null===e||void 0===e?void 0:e.userInfo.email]}),(0,k.jsxs)("span",{className:"font-medium text-coal",children:[(0,k.jsx)("span",{className:"font-medium text-cello",children:"Mobile:"})," ",null===e||void 0===e?void 0:e.userInfo.mobile]}),(0,k.jsxs)("span",{className:"font-medium text-coal",children:[(0,k.jsx)("span",{className:"font-medium text-cello",children:"Address:"})," ",null===t||void 0===t?void 0:t.addressLine1,","," ",null===t||void 0===t?void 0:t.addressLine2]}),(0,k.jsxs)("span",{className:"font-medium text-coal",children:[(0,k.jsx)("span",{className:"font-medium text-cello",children:"City:"})," ",null===e||void 0===e?void 0:e.userInfo.city]}),(0,k.jsxs)("span",{className:"font-medium text-coal",children:[(0,k.jsx)("span",{className:"font-medium text-cello",children:"Pin Code:"})," ",null===t||void 0===t?void 0:t.pinCode]})]})]}),(0,k.jsxs)("div",{className:"border p-3 md:!p-4 rounded",children:[(0,k.jsx)("h5",{className:"font-semibold mb-2",children:"Services Booked"}),null===e||void 0===e?void 0:e.servicesBooked.map(((e,s)=>(0,k.jsxs)("div",{className:"mb-4 border-t pt-2",children:[(0,k.jsxs)("p",{className:"font-semibold text-denim",children:["Service Name:"," ",(0,k.jsx)("span",{className:"text-coal",children:I.$t[e.subServiceId]||"Unknown Service"})]}),e.sessions.map(((e,s)=>(0,k.jsxs)("div",{className:"bg-slate-100 border-b-4 flex flex-col p-4 rounded-lg",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center",children:[(0,k.jsxs)("p",{className:"font-bold text-lg",children:["Session - ",s+1]}),(0,k.jsx)("button",{onClick:()=>((e,s)=>{h(e),p(s),u(!0)})(e,s+1),className:"text-sm text-skyn underline",children:"Edit"})]}),(0,k.jsxs)("p",{className:"text-sm",children:[(0,k.jsx)("strong",{children:"Date:"})," ",(0,I.sX)(null===e||void 0===e?void 0:e.treatmentDate)]}),(0,k.jsxs)("p",{className:"text-sm",children:[(0,k.jsx)("strong",{children:"Time:"})," ",(0,I.Lc)(null===e||void 0===e?void 0:e.appointmentTime)]})]},s)))]},s)))]})]})]},a)}))}),c&&(0,k.jsx)(F,{onClose:()=>u(!1),handleSave:()=>{N.handleSubmit()},formik:N,sessionNo:x})]})}var M=a(90),W=a(5481),z=a(5399),$=a(7891);const V=(0,l.lazy)((()=>Promise.all([a.e(2442),a.e(2017),a.e(5570),a.e(6624),a.e(3105)]).then(a.bind(a,3105)))),R=(0,l.lazy)((()=>Promise.resolve().then(a.bind(a,7855))));function Y(e){var s,a,t,r,d,i,n;let{addresses:o,setAddresses:c,addressFormik:u,isAdding:m,setIsAdding:h,handleAddressSubmit:x}=e;const[p,v]=(0,l.useState)(null),[A,P]=(0,l.useState)(!1),[L,B]=(0,l.useState)({}),q=(0,b.k)(),I=(0,f.wA)(),T=(0,f.d4)((e=>e.userProfile.userProfile)),{isFetching:U,refetch:F}=(0,g.useQuery)(["getUserAddress"],(()=>(0,w.GA)({userId:T.userId})),{refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:!1,onSuccess:e=>{var s;"SUCCESS"===(null===e||void 0===e?void 0:e.status)?(c(null===e||void 0===e?void 0:e.data),null===e||void 0===e||null===(s=e.data)||void 0===s||s.map((e=>u.setValues({id:e.id||"",fullName:e.fullName||"",phone:e.phone||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||"",city:e.city||"",state:e.state||"",pinCode:e.pinCode||"",country:"India"}))),F&&I((0,S.od)({addresses:null===e||void 0===e?void 0:e.data}))):null!==e&&void 0!==e&&e.message.includes("No addresses found")||q(null===e||void 0===e?void 0:e.message,"error")},onError:e=>{q(null===e||void 0===e?void 0:e.message,"error")}}),{mutate:O,isLoading:D}=(0,g.useMutation)(w.xu,{onSuccess(e){"SUCCESS"===(null===e||void 0===e?void 0:e.status)?(q(null===e||void 0===e?void 0:e.message,"success"),F()):q(null===e||void 0===e?void 0:e.message,"error")},onError(e){q(null===e||void 0===e?void 0:e.message,"error")}}),{mutate:Y,isLoading:Z}=(0,g.useMutation)(w.Z1,{onSuccess:e=>{"SUCCESS"===(null===e||void 0===e?void 0:e.status)?(q("Address removed","success"),P(!1),F()):q(null===e||void 0===e?void 0:e.message,"error")},onError:e=>{q(null===e||void 0===e?void 0:e.message,"error")}});return(0,k.jsxs)("div",{children:[(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(R,{open:U||D||Z})}),(0,k.jsx)("p",{className:"font-semibold text-cello font-poppins text-xl text-center mt-4",children:"Address Details"}),(0,k.jsx)(C.A,{}),(0,k.jsxs)("div",{className:"grid xl:!grid-cols-2 gap-4 mt-4 font-poppins p-2",children:[o.map(((e,s)=>(0,k.jsxs)("div",{className:"flex flex-col justify-between bg-white p-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 ease-in-out",children:[(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"text-gray-600 font-bold",children:e.fullName}),(0,k.jsx)("span",{className:"text-gray-600 text-sm mt-2",children:e.phone}),(0,k.jsx)("span",{className:"text-gray-600 text-sm",children:e.addressLine1}),(0,k.jsx)("span",{className:"text-gray-600 text-sm",children:e.addressLine2}),(0,k.jsx)("span",{className:"text-gray-600 text-sm",children:"".concat(e.city,", ").concat(e.state," - ").concat(e.pinCode)}),(0,k.jsx)("hr",{className:"my-4 border-blue-gray-50 px-8"})]}),(0,k.jsxs)("div",{className:"flex flex-col lg:!flex-row gap-3 mt-4",children:[(0,k.jsxs)("button",{onClick:()=>(e=>{const s=o[e];h(!0),v(e),u.setValues({id:s.id||"",fullName:s.fullName||"",phone:s.phone||"",addressLine1:s.addressLine1||"",addressLine2:s.addressLine2||"",city:s.city||"",state:s.state||"",pinCode:s.pinCode||"",country:"India"})})(s),className:"flex items-center space-x-1 text-sm bg-skyn justify-center text-white hover:opacity-80 transition-all duration-300 px-4 py-2 rounded shadow-lg",children:[(0,k.jsx)(y.WXf,{}),(0,k.jsx)("span",{children:"Edit"})]}),(0,k.jsxs)("button",{onClick:()=>(e=>{B(e),P(!0)})(e),className:"flex items-center space-x-1 text-sm justify-center bg-red-600 text-white hover:opacity-80 transition-all duration-300 px-4 py-2 rounded shadow-lg",children:[(0,k.jsx)(y.IXo,{}),(0,k.jsx)("span",{children:"Delete"})]})]})]},s))),!m&&(0,k.jsx)("button",{onClick:()=>{h(!0),v(null),u.resetForm()},className:"flex items-center justify-center p-4 border rounded-md shadow-md bg-gray-100 hover:bg-gray-200 transition",children:(0,k.jsx)(M.tNe,{className:"text-4xl text-gray-600"})})]}),A&&(0,k.jsx)(z.A,{title:"Are you sure you want to delete this address?",handleCancel:()=>{P(!1),B(null)},handlePrimaryButtonClick:()=>{Y({userId:T.userId,addressId:L.id})},confirmButtonText:"Confirm",imageSrc:$.A.images.Common.Warning}),m&&(0,k.jsx)(W.N,{children:(0,k.jsx)(E.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.45},className:"bg-slate-900/20 backdrop-blur p-4 fixed inset-0 z-50 md:grid place-items-center overflow-scroll",children:(0,k.jsxs)(E.P.div,{initial:{scale:0,rotate:"12.5deg"},animate:{scale:1,rotate:"0deg"},exit:{scale:0,rotate:"-12.5deg"},transition:{duration:.45},onClick:e=>e.stopPropagation(),className:"bg-white p-6 rounded-lg w-full max-w-lg",children:[(0,k.jsxs)("form",{children:[(0,k.jsx)("h2",{className:"font-bold mb-4 text-lg",children:"Contact Details"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(V,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Full Name",name:"fullName",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(s=u.values)||void 0===s?void 0:s.fullName,onChange:u.handleChange,handleBlur:u.handleBlur,error:u.errors.fullName,touched:u.touched.fullName})}),(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(V,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Contact Number",name:"phone",maxLength:10,regex:N.y.numeric,textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(a=u.values)||void 0===a?void 0:a.phone,onChange:u.handleChange,handleBlur:u.handleBlur,error:u.errors.phone,touched:u.touched.phone})})]}),(0,k.jsx)("h2",{className:"font-bold mb-4 text-lg",children:"Address Details"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(V,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Address Line 1",name:"addressLine1",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(t=u.values)||void 0===t?void 0:t.addressLine1,onChange:u.handleChange,handleBlur:u.handleBlur,error:u.errors.addressLine1,touched:u.touched.addressLine1})}),(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(V,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Address Line 2",name:"addressLine2",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"w-full !mb-4",value:null===(r=u.values)||void 0===r?void 0:r.addressLine2,onChange:u.handleChange,handleBlur:u.handleBlur,error:u.errors.addressLine2,touched:u.touched.addressLine2})}),(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(V,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice ",className:"h-12 rounded-md !bg-transparent",placeholder:"Enter",requiredStar:!0,labelToShow:"Pincode",regex:N.y.numeric,name:"pinCode",maxLength:6,textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",value:null===(d=u.values)||void 0===d?void 0:d.pinCode,onChange:u.handleChange,handleBlur:u.handleBlur,error:u.errors.pinCode,touched:u.touched.pinCode})}),(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(V,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice ",className:"h-12 rounded-md !bg-transparent",placeholder:"City",requiredStar:!0,labelToShow:"City",name:"city",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",value:null===(i=u.values)||void 0===i?void 0:i.city,onChange:u.handleChange,handleBlur:u.handleBlur,error:u.errors.city,touched:u.touched.city})}),(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(V,{textClassOverride:"!text-kashmirBlue",placeholderClasses:"placeholder:!opacity-30 !text-licorice ",className:"h-12 rounded-md !bg-transparent",placeholder:"State",requiredStar:!0,labelToShow:"State",name:"state",textFieldColorClass:"shadow-insetLight",inputClassName:"!bg-transparent",fieldWidth:"!mb-4",value:null===(n=u.values)||void 0===n?void 0:n.state,onChange:u.handleChange,handleBlur:u.handleBlur,error:u.errors.state,touched:u.touched.state})})]})]}),(0,k.jsxs)("div",{className:"flex flex-col md:!flex-row justify-end gap-4 mt-5",children:[(0,k.jsx)("button",{type:"button",onClick:()=>{h(!1),v(null),u.resetForm()},className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 shadow-md",children:"Cancel"}),(0,k.jsx)("button",{type:"button",className:"bg-skyn text-white px-4 py-2 rounded-md hover:bg-skyn-dark hover:opacity-80 shadow-md",onClick:()=>{if(u.isValid){if(null!==p){const e=(0,j.A)((0,j.A)({},o[p]),u.values),s={userId:T.userId,addressId:e.id,updatedAddress:{id:e.id,fullName:e.fullName,phone:e.phone,addressLine1:e.addressLine1,addressLine2:e.addressLine2,city:e.city,state:e.state,pinCode:e.pinCode,country:"India"}};O({reqBody:s})}else x();v(null),h(!1)}else q("Please enter all the required fields!","error")},children:null!==p?"Save Changes":"Add Address"})]})]})})})]})}var Z=a(5335);const G=(0,l.lazy)((()=>Promise.resolve().then(a.bind(a,7855))));const Q=function(){const[e,s]=(0,l.useState)(!1),a=(0,b.k)(),r=(0,p.zy)(),n=(0,p.Zp)(),j=(0,f.wA)(),y=(0,f.d4)((e=>e.userProfile.userProfile)),[N,C]=(0,l.useState)([]),[A,P]=(0,l.useState)(!1),[q,I]=(0,l.useState)(""),[E,T]=(0,l.useState)(""),[U,F]=(0,l.useState)("Profile");(0,l.useEffect)((()=>{const e=decodeURIComponent(r.hash.replace("#",""));e&&F(e)}),[r.hash]),(0,l.useEffect)((()=>{I((null===y||void 0===y?void 0:y.name)||""),T((null===y||void 0===y?void 0:y.phone)||""),s((null===y||void 0===y?void 0:y.isAdmin)||!1)}),[y]);const O=(0,o.A)("(max-width: 1023px)"),M=[{id:"Profile",label:"My Profile",icon:(0,k.jsx)(h.x$1,{})}],W=[{id:"Profile",label:"My Profile",icon:(0,k.jsx)(h.x$1,{})},{id:"Address",label:"Address",icon:(0,k.jsx)(m.us2,{})},{id:"Appointments",label:"My Appointments",icon:(0,k.jsx)(x.DTo,{})},{id:"Orders",label:"My Orders",icon:(0,k.jsx)(h.AsH,{})}],{mutate:z,isFetching:$}=(0,g.useMutation)(w.GA,{onSuccess(e){if("SUCCESS"===(null===e||void 0===e?void 0:e.status)){const s=null===e||void 0===e?void 0:e.data;C(s),j((0,S.od)({addresses:s}))}else a(null===e||void 0===e?void 0:e.message,"error")},onError(e){a(e.message,"error")}}),{mutate:V,isLoading:R}=(0,g.useMutation)(w.vN,{onSuccess(e){var s;"SUCCESS"===(null===e||void 0===e?void 0:e.status)?(a(e.message,"success"),C([...N,null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.addresses.map((e=>({id:e.id||"",name:e.name||"",phone:e.phone||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||"",city:e.city||"",state:e.state||"",pinCode:e.pinCode||""})))]),P(!1),z({userId:y.userId})):a(e.message,"error")},onError(e){a(e.message,"error")}}),Q=(0,t.Wx)({enableReinitialize:!0,validateOnMount:!0,validateOnChange:!0,initialValues:d,validationSchema:i,onSubmit:(e,s)=>{let{resetForm:a}=s;V({userId:y.userId,addressDetails:{fullName:null===e||void 0===e?void 0:e.fullName,phone:null===e||void 0===e?void 0:e.phone,addressLine1:null===e||void 0===e?void 0:e.addressLine1,addressLine2:null===e||void 0===e?void 0:e.addressLine2,city:null===e||void 0===e?void 0:e.city,state:null===e||void 0===e?void 0:e.state,pinCode:null===e||void 0===e?void 0:e.pinCode,country:"India"}}),a()}}),H=[(0,k.jsx)(v.N_,{to:"/",className:"text-skyn no-underline !font-poppins hover:opacity-80 text-lg",children:"Home"},"1"),(0,k.jsx)(c.A,{className:"!text-cello !font-poppins !text-lg",children:"Profile"},"2")];return(0,k.jsxs)(Z.A,{children:[(0,k.jsx)(l.Suspense,{children:(0,k.jsx)(G,{open:R||$})}),(0,k.jsxs)("div",{className:"mt-3 ".concat(O?"py-3":"py-4 mt-4"),children:[(0,k.jsx)("div",{className:"mt-5 ".concat(O?"px-3":"px-5"),children:(0,k.jsx)(u.A,{separator:">","aria-label":"breadcrumb",className:"mb-4 py-2",children:H})}),(0,k.jsxs)("div",{className:"flex flex-col md:!flex-row mt-3 md:!space-x-5 space-y-5 md:!space-y-0 ".concat(O?"px-3":"px-5"),children:[(0,k.jsxs)("div",{className:"flex flex-col shadow rounded font-poppins sm:w-full md:!w-3/5 lg:!w-1/3 xl:!1/5 md:!self-start",children:[(0,k.jsxs)("div",{className:"flex flex-col bg-skyn text-white font-bold p-4 rounded-t-lg",children:[(0,k.jsx)("p",{children:q}),(0,k.jsx)("p",{children:E})]}),(0,k.jsx)("div",{className:"flex flex-col p-4",children:(e?M:W).map((e=>(0,k.jsxs)("div",{className:"flex items-center space-x-2 w-full p-2 rounded cursor-pointer mb-2 ".concat(U===e.id?"!bg-slate-300":"hover:!bg-slate-300"),onClick:()=>{return s=e.id,F(s),void n("/user-profile",{replace:!0});var s},children:[e.icon,(0,k.jsx)("div",{className:"flex-1",children:e.label})]},e.id)))})]}),(0,k.jsxs)("div",{className:"shadow md:!p-5 rounded w-full",children:["Profile"===U&&(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(L,{userProfile:y})}),"Address"===U&&(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(Y,{addresses:N,setAddresses:C,addressFormik:Q,isAdding:A,setIsAdding:P,handleAddressSubmit:()=>{Q.isValid?Q.handleSubmit():a("Please fill all the required fields","error")}})}),"Appointments"===U&&(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(D,{userProfile:y})}),"Orders"===U&&(0,k.jsx)(l.Suspense,{fallback:(0,k.jsx)("div",{}),children:(0,k.jsx)(B,{orderHistory:[{id:1,product:"Cleanser",orderedOn:"11-12-2024"},{id:2,product:"Vitamin C Hydra Gel Creame",orderedOn:"12-12-2024"}]})})]})]})]})]})};const H=function(){return(0,k.jsx)(Q,{})}},3245:(e,s,a)=>{a.d(s,{ND:()=>h,RO:()=>c,TC:()=>m,Ty:()=>u,a_:()=>o,bE:()=>i,bc:()=>x,dt:()=>n,od:()=>r,p:()=>t,y4:()=>d});var l=a(7112);const t=e=>({type:l.B6,payload:e}),r=e=>({type:l.kn,payload:e}),d=()=>({type:l.b6}),i=e=>({type:l.l$,payload:e}),n=e=>({type:l.dy,payload:e}),o=()=>({type:l.v3}),c=(e,s)=>({type:l.u0,payload:{productId:e,quantity:s}}),u=e=>({type:l.mP,payload:e}),m=e=>({type:l.VR,payload:e}),h=e=>({type:l.By,payload:e}),x=()=>({type:l.xG})},9073:(e,s,a)=>{a.d(s,{Uz:()=>d,W2:()=>r,Zg:()=>i});var l=a(5831),t=a(1689);const r=async e=>{let{userId:s}=e;try{return await t.S.get("".concat(l.A.Booking.getUserBookings,"/").concat(s))}catch(a){throw console.log(a),new Error}},d=async e=>{let{reqBody:s}=e;try{return await t.S.post(l.A.Booking.createBooking,s)}catch(a){throw console.log(a),new Error}},i=async e=>{let{reqBody:s}=e;try{return await t.S.post(l.A.Booking.updateSession,s)}catch(a){throw console.log(a),new Error}}},3190:(e,s,a)=>{a.d(s,{DG:()=>i,GA:()=>d,Z1:()=>o,vN:()=>r,xu:()=>n});var l=a(5831),t=a(1689);const r=async e=>{let{userId:s,addressDetails:a}=e;const r={userId:s,address:a};try{return await t.P.post("".concat(l.A.Users.addAddress),r)}catch(n){var d,i;throw new Error(null===n||void 0===n||null===(d=n.data)||void 0===d||null===(i=d.error)||void 0===i?void 0:i.message)}},d=async e=>{let{userId:s}=e;try{return await t.P.get("".concat(l.A.Users.getUserAddress,"/").concat(s))}catch(d){var a,r;throw new Error(null===d||void 0===d||null===(a=d.data)||void 0===a||null===(r=a.error)||void 0===r?void 0:r.message)}},i=async e=>{let{reqBody:s}=e;try{return await t.P.put(l.A.Users.updateUserDetails,s)}catch(d){var a,r;throw new Error(null===d||void 0===d||null===(a=d.data)||void 0===a||null===(r=a.error)||void 0===r?void 0:r.message)}},n=async e=>{let{reqBody:s}=e;try{return await t.P.put(l.A.Users.updateUserAddress,s)}catch(d){var a,r;throw new Error(null===d||void 0===d||null===(a=d.data)||void 0===a||null===(r=a.error)||void 0===r?void 0:r.message)}},o=async e=>{let{userId:s,addressId:a}=e;try{return await t.P.delete("".concat(l.A.Users.deleteUserAddress,"?userId=").concat(s,"&addressId=").concat(a))}catch(i){var r,d;throw new Error(null===i||void 0===i||null===(r=i.data)||void 0===r||null===(d=r.error)||void 0===d?void 0:d.message)}}},3464:(e,s,a)=>{a.d(s,{A:()=>t});a(2483);var l=a(6723);const t=e=>(0,l.jsx)("div",{className:"my-6 ".concat(e),children:(0,l.jsx)("hr",{style:{borderWidth:"0 0 4px",borderImage:"linear-gradient(90deg, rgba(238, 101, 3, 0), rgba(238, 101, 3, 1) 50%, rgba(238, 101, 3, 0) 100%) 0 0 100%",borderStyle:"solid",width:"100%"}})})},1689:(e,s,a)=>{a.d(s,{P:()=>d,S:()=>i});var l=a(2555),t=a(4686),r=a(5831);const d=t.A.create({baseURL:r.A.baseURL}),i=t.A.create({baseURL:r.A.baseURL});d.interceptors.request.use((e=>(e.headers=(0,l.A)({},e.headers),e)),(e=>Promise.reject(e))),d.interceptors.response.use((e=>e.data),(e=>{var s;Promise.reject(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data)}));const n=async()=>{const e=sessionStorage.getItem("token")||"";try{return e||(sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null)}catch(s){return sessionStorage.clear(),window.location.href="".concat(window.location.origin,"/login"),null}};i.interceptors.request.use((async e=>{const s=await n();return e.headers=(0,l.A)({Authorization:"Bearer ".concat(s)},e.headers),e}),(e=>Promise.reject(e))),i.interceptors.response.use((e=>e.data),(e=>{var s;Promise.reject(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.data)}))}}]);
//# sourceMappingURL=9683.76c339c0.chunk.js.map